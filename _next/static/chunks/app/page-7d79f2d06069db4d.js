(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4697:(e,t,r)=>{Promise.resolve().then(r.bind(r,1919))},1919:(e,t,r)=>{"use strict";r.d(t,{default:()=>eF});var o=r(7312),a=r(4447),n=r(2317),s=r(1027),i=r(3463),l=r(9795);function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,i.$)(t))}let d=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:i=!1,...l}=e,m=i?n.DX:"button";return(0,o.jsx)(m,{className:c(d({variant:a,size:s,className:r})),ref:t,...l})});m.displayName="Button";let h=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,o.jsx)("input",{type:a,className:c("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});h.displayName="Input";var f=r(6195);let u=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(f.b,{ref:t,className:c(u(),r),...a})});x.displayName=f.b.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("textarea",{className:c("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});g.displayName="Textarea";var p=r(5900);let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsxs)(p.bL,{ref:t,className:c("relative flex w-full touch-none select-none items-center",r),...a,children:[(0,o.jsx)(p.CC,{className:"relative h-0.5 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,o.jsx)(p.Q6,{className:"absolute h-full bg-primary"})}),(0,o.jsx)(p.zi,{className:"block h-2.5 w-2.5 rounded-full border border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});v.displayName=p.bL.displayName;var b=r(2714),w=r(1719),y=r(1902),j=r(8867);let N=b.bL;b.YJ;let S=b.WT,k=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,o.jsxs)(b.l9,{ref:t,className:c("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[a,(0,o.jsx)(b.In,{asChild:!0,children:(0,o.jsx)(w.A,{className:"h-4 w-4 opacity-50"})})]})});k.displayName=b.l9.displayName;let C=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(b.PP,{ref:t,className:c("flex cursor-default items-center justify-center py-1",r),...a,children:(0,o.jsx)(y.A,{className:"h-4 w-4"})})});C.displayName=b.PP.displayName;let E=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(b.wn,{ref:t,className:c("flex cursor-default items-center justify-center py-1",r),...a,children:(0,o.jsx)(w.A,{className:"h-4 w-4"})})});E.displayName=b.wn.displayName;let O=a.forwardRef((e,t)=>{let{className:r,children:a,position:n="popper",...s}=e;return(0,o.jsx)(b.ZL,{children:(0,o.jsxs)(b.UC,{ref:t,className:c("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...s,children:[(0,o.jsx)(C,{}),(0,o.jsx)(b.LM,{className:c("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,o.jsx)(E,{})]})})});O.displayName=b.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(b.JU,{ref:t,className:c("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=b.JU.displayName;let F=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,o.jsxs)(b.q7,{ref:t,className:c("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(b.VF,{children:(0,o.jsx)(j.A,{className:"h-4 w-4"})})}),(0,o.jsx)(b.p4,{children:a})]})});F.displayName=b.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(b.wv,{ref:t,className:c("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=b.wv.displayName;var B=r(6217),I=r(767);let D=B.bL,R=B.l9,z=B.ZL;B.bm;let A=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(B.hJ,{ref:t,className:c("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});A.displayName=B.hJ.displayName;let L=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,o.jsxs)(z,{children:[(0,o.jsx)(A,{}),(0,o.jsxs)(B.UC,{ref:t,className:c("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n,children:[a,(0,o.jsxs)(B.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(I.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});L.displayName=B.UC.displayName;let P=e=>{let{className:t,...r}=e;return(0,o.jsx)("div",{className:c("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};P.displayName="DialogHeader";let T=e=>{let{className:t,...r}=e;return(0,o.jsx)("div",{className:c("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};T.displayName="DialogFooter";let J=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(B.hE,{ref:t,className:c("text-lg font-semibold leading-none tracking-tight",r),...a})});J.displayName=B.hE.displayName;let W=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(B.VY,{ref:t,className:c("text-sm text-muted-foreground",r),...a})});W.displayName=B.VY.displayName;var _=r(4159),Y=r(992),M=r(1781),U=r(6954),X=r(7078),H=r(3920),G=r(5686),V=r(8684),q=r(4857),K=r(4505),$=r(4710),Z=r(3473),Q=r(8003),ee=r(670),et=r.n(ee);let er=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});er.displayName="Card",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:c("flex flex-col space-y-1.5 p-6",r),...a})}).displayName="CardHeader",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:c("text-2xl font-semibold leading-none tracking-tight",r),...a})}).displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:c("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let eo=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:c("p-6 pt-0",r),...a})});eo.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:c("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";var ea=r(434);let en=a.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",decorative:n=!0,...s}=e;return(0,o.jsx)(ea.b,{ref:t,decorative:n,orientation:a,className:c("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...s})});en.displayName=ea.b.displayName;var es=r(532);let ei=es.bL,el=es.l9,ec=a.forwardRef((e,t)=>{let{className:r,align:a="center",sideOffset:n=4,...s}=e;return(0,o.jsx)(es.ZL,{children:(0,o.jsx)(es.UC,{ref:t,align:a,sideOffset:n,className:c("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})})});ec.displayName=es.UC.displayName;var ed=r(7859),em=r(853);let eh=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(ed.uB,{ref:t,className:c("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...a})});eh.displayName=ed.uB.displayName;let ef=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,o.jsx)(em.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,o.jsx)(ed.uB.Input,{ref:t,className:c("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...a})]})});ef.displayName=ed.uB.Input.displayName;let eu=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(ed.uB.List,{ref:t,className:c("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...a})});eu.displayName=ed.uB.List.displayName;let ex=a.forwardRef((e,t)=>(0,o.jsx)(ed.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));ex.displayName=ed.uB.Empty.displayName;let eg=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(ed.uB.Group,{ref:t,className:c("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...a})});eg.displayName=ed.uB.Group.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(ed.uB.Separator,{ref:t,className:c("-mx-1 h-px bg-border",r),...a})}).displayName=ed.uB.Separator.displayName;let ep=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(ed.uB.Item,{ref:t,className:c("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r),...a})});ep.displayName=ed.uB.Item.displayName;var ev=r(5800);function eb(e){var t;let{languages:r,activeLanguage:n,onChange:s}=e,[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[f,u]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),v=(null===(t=r.find(e=>e.code===n))||void 0===t?void 0:t.name)||n;return(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)(ei,{open:i,onOpenChange:l,children:[(0,o.jsx)(el,{asChild:!0,children:(0,o.jsxs)(m,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-[200px] justify-between",children:[v,(0,o.jsx)(ev.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,o.jsx)(ec,{className:"w-[200px] p-0",children:(0,o.jsxs)(eh,{children:[(0,o.jsx)(ef,{placeholder:"Search language..."}),(0,o.jsxs)(eu,{children:[(0,o.jsx)(ex,{children:"No language found."}),(0,o.jsxs)(eg,{children:[r.map(e=>(0,o.jsxs)(ep,{value:e.code,onSelect:()=>{s(e.code),l(!1)},children:[(0,o.jsx)(j.A,{className:"mr-2 h-4 w-4 ".concat(n===e.code?"opacity-100":"opacity-0")}),e.name]},e.code)),(0,o.jsxs)(ep,{onSelect:()=>{d(!0),l(!1)},children:[(0,o.jsx)(Z.A,{className:"mr-2 h-4 w-4"}),"Add Language"]})]})]})]})})]}),(0,o.jsx)(D,{open:c,onOpenChange:d,children:(0,o.jsxs)(L,{children:[(0,o.jsx)(P,{children:(0,o.jsx)(J,{children:"Add New Language"})}),(0,o.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,o.jsx)(x,{htmlFor:"code",className:"text-right",children:"Code"}),(0,o.jsx)(h,{id:"code",value:f,onChange:e=>u(e.target.value),placeholder:"en",className:"col-span-3"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,o.jsx)(x,{htmlFor:"name",className:"text-right",children:"Name"}),(0,o.jsx)(h,{id:"name",value:g,onChange:e=>p(e.target.value),placeholder:"English",className:"col-span-3"})]})]}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)(m,{onClick:()=>{d(!1),u(""),p("")},children:"Add Language"})})]})})]})}let ew=[{code:"en",name:"English"},{code:"ru",name:"Russian"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese"},{code:"cs",name:"Czech"}],ey={orientation:"portrait",backgroundColor:"#007AFF",titleColor:"#FFFFFF",descriptionColor:"#FFFFFF",fontFamily:"SF Pro"},ej=[{value:"top-left",label:"Top Left"},{value:"top-center",label:"Top Center"},{value:"top-right",label:"Top Right"},{value:"center-left",label:"Center Left"},{value:"center",label:"Center"},{value:"center-right",label:"Center Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-center",label:"Bottom Center"},{value:"bottom-right",label:"Bottom Right"}];function eN(e){let{color:t,onChange:r}=e,[n,s]=(0,a.useState)(t),i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{s(t)},[t]),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)(ei,{children:[(0,o.jsx)(el,{asChild:!0,children:(0,o.jsx)("button",{className:"w-10 h-10 rounded-md border border-input",style:{backgroundColor:t},"aria-label":"Pick a color"})}),(0,o.jsx)(ec,{className:"w-64",children:(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3","#FF1493","#FF69B4","#FFC0CB","#FFFFFF","#000000","#808080","#A52A2A","#D2691E","#FFD700","#008000","#00FFFF"].map(e=>(0,o.jsx)("button",{className:"w-8 h-8 rounded-md border border-input",style:{backgroundColor:e},onClick:()=>{r(e),s(e)},"aria-label":"Select color ".concat(e)},e))}),(0,o.jsx)("input",{ref:i,type:"color",value:n,onChange:e=>{s(e.target.value),r(e.target.value)},className:"w-full h-10"})]})})]}),(0,o.jsx)(h,{value:n,onChange:e=>{let t=e.target.value;s(t),/^#[0-9A-F]{6}$/i.test(t)&&r(t)},className:"w-28",placeholder:"#RRGGBB"})]})}var eS=r(78),ek=r.n(eS);class eC{initDB(){return new Promise((e,t)=>{if(!window.indexedDB){console.error("Ваш браузер не поддерживает IndexedDB"),t("IndexedDB не поддерживается");return}let r=window.indexedDB.open(this.dbName,this.version);r.onerror=e=>{console.error("Ошибка при открытии базы данных",e),t("Ошибка при открытии базы данных")},r.onsuccess=t=>{this.db=t.target.result,e()},r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})}})}async saveImage(e,t){return this.db||await this.initDB(),new Promise((r,o)=>{try{let a=new FileReader;a.onload=()=>{try{let n=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),s={id:e,data:a.result,type:t.type,lastModified:new Date().getTime()},i=n.put(s);i.onsuccess=()=>r(),i.onerror=e=>{console.error("Error putting data in IndexedDB:",e),o(e)}}catch(e){console.error("Catch error in transaction:",e),o(e)}},a.onerror=e=>o(e),a.readAsDataURL(t)}catch(e){console.error("Outer catch error:",e),o(e)}})}async getImage(e){return this.db||await this.initDB(),new Promise((t,r)=>{try{let o=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);o.onsuccess=()=>{let r=o.result;if(!r){t(null);return}let a=atob(r.data.split(",")[1]),n=[];for(let e=0;e<a.length;e++)n.push(a.charCodeAt(e));let s=new Blob([new Uint8Array(n)],{type:r.type}),i=new File([s],"preview_".concat(e,".").concat(r.type.split("/")[1]),{type:r.type,lastModified:r.lastModified});t(i)},o.onerror=e=>r(e)}catch(e){r(e)}})}async deleteImage(e){return this.db||await this.initDB(),new Promise((t,r)=>{try{let o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);o.onsuccess=()=>t(),o.onerror=e=>r(e)}catch(e){r(e)}})}async clearAll(){return this.db||await this.initDB(),new Promise((e,t)=>{try{let r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();r.onsuccess=()=>e(),r.onerror=e=>t(e)}catch(e){t(e)}})}constructor(){this.db=null,this.dbName="bannerGeneratorDB",this.storeName="screenshots",this.version=1,this.initDB()}}class eE{initDB(){return new Promise((e,t)=>{if(!window.indexedDB){console.error("IndexedDB not supported"),t("IndexedDB not supported");return}let r=window.indexedDB.open(this.dbName,this.version);r.onerror=e=>t(e),r.onsuccess=t=>{this.db=t.target.result,e()},r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})}})}async saveFont(e,t){return this.db||await this.initDB(),new Promise((r,o)=>{let a=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({id:e,name:e,data:t});a.onsuccess=()=>r(),a.onerror=e=>o(e)})}async getAllFonts(){return this.db||await this.initDB(),new Promise((e,t)=>{let r=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();r.onsuccess=()=>{e((r.result||[]).map(e=>({name:e.name||e.id,data:e.data})))},r.onerror=e=>t(e)})}constructor(){this.db=null,this.dbName="bannerGeneratorFontsDB",this.storeName="fonts",this.version=1,this.initDB()}}let eO=e=>{let{value:t,onChange:r,min:a,max:n,step:s=1,unit:i,className:l=""}=e;return(0,o.jsxs)("div",{className:"flex items-center gap-2 ".concat(l),children:[(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(v,{value:[t],min:a,max:n,step:s,onValueChange:e=>{let[t]=e;return r(t)},className:"w-full"})}),(0,o.jsxs)("div",{className:"flex items-center gap-1 min-w-[90px]",children:[(0,o.jsx)(h,{type:"number",value:t,onChange:e=>{let t=Number(e.target.value);isNaN(t)||r(Math.min(Math.max(t,a),n))},className:"w-[60px] h-6 px-2 text-[10px] font-mono",min:a,max:n,step:s}),i&&(0,o.jsx)("span",{className:"text-[10px] font-mono text-gray-500",children:i})]})]})};function eF(){let[e,t]=(0,a.useState)("ru"),[r,n]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("bannerSettings");if(e)return JSON.parse(e)}catch(e){console.error("Error loading initial banner settings:",e)}return ey}),[s,i]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("localizedContent");if(e)return JSON.parse(e)}catch(e){console.error("Error loading initial localized content:",e)}return{ru:{title:"Новое приложение",description:"Описание приложения",promotionalText:"Рекламный текст",whatsNew:"Что нового в этой версии",keywords:"приложение, ключевые, слова"}}}),[l,c]=(0,a.useState)(!1),[d,f]=(0,a.useState)(""),[u,p]=(0,a.useState)(0),[v,b]=(0,a.useState)(0),[w,y]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("textAlignment");if(e)return console.log("Loaded initial text alignment from localStorage:",e),e}catch(e){console.error("Error loading initial text alignment:",e)}return"center"}),[j,C]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("fontSize");if(e)return console.log("Loaded initial font size from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial font size:",e)}return{title:24,description:16}}),[E,B]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("lineHeight");if(e)return console.log("Loaded initial line height from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial line height:",e)}return{title:"auto",description:"auto"}}),[I,z]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("letterSpacing");if(e)return console.log("Loaded initial letter spacing from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial letter spacing:",e)}return{title:0,description:0}}),[A,ee]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("fontWeight");if(e)return console.log("Loaded initial font weight from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial font weight:",e)}return{title:700,description:400}}),[ea,es]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("fontFamily");if(e)return console.log("Loaded initial font family from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial font family:",e)}return{title:"SF Pro",description:"SF Pro"}});(0,a.useRef)(null);let ei=(0,a.useRef)(null),[el,ec]=(0,a.useState)("banner"),[ed,em]=(0,a.useState)(null),eh=(0,a.useRef)(null),ef=(0,a.useRef)(null);(0,a.useEffect)(()=>(eh.current||(eh.current=new eC,eh.current.initDB().catch(e=>console.error("Ошибка при инициализации IndexedDB:",e))),ef.current||(ef.current=new eE,ef.current.initDB().then(async()=>{let e=await ef.current.getAllFonts();e.length&&e1(e)}).catch(e=>console.error("IndexedDB init error (fonts):",e))),()=>{}),[]);let[eu,ex]=(0,a.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("previewItems");if(e){let t=JSON.parse(e);if(console.log("Loaded initial preview items from localStorage",t),Array.isArray(t)&&t.length>0)return t}}catch(e){console.error("Error loading initial preview items:",e)}return[{id:1,name:"Preview 1",backgroundColor:"#FFD700",devicePosition:"center",deviceScale:100,rotation:{device:0,title:0,description:0,textBlock:0},verticalOffset:{combined:0,title:0,description:0,device:0},horizontalOffset:{combined:0,title:0,description:0},screenshot:{file:null,borderColor:"#000000",borderWidth:8,borderRadius:30}}]});(0,a.useEffect)(()=>{if(window.localStorage){console.log("Checking for additional data in localStorage");try{let e=localStorage.getItem("localizedContent");if(e){let t=JSON.parse(e);i(t)}let t=localStorage.getItem("textAlignment");t&&y(t);let r=localStorage.getItem("fontSize");r&&C(JSON.parse(r));let o=localStorage.getItem("lineHeight");o&&B(JSON.parse(o));let a=localStorage.getItem("letterSpacing");a&&z(JSON.parse(a));let n=localStorage.getItem("fontWeight");n&&ee(JSON.parse(n));let s=localStorage.getItem("fontFamily");s&&es(JSON.parse(s))}catch(e){console.error("Error loading additional data from localStorage:",e)}}},[]),(0,a.useEffect)(()=>{if(window.localStorage&&eu)try{console.log("Saving previewItems to localStorage",eu.length);let e=eu.map(e=>({...e,screenshot:{...e.screenshot,file:null}}));localStorage.setItem("previewItems",JSON.stringify(e))}catch(e){console.error("Error saving preview items:",e)}},[eu]),(0,a.useEffect)(()=>{console.log("Initializing IndexedDB and loading images"),eh.current||(eh.current=new eC);let e=async()=>{if(console.log("Loading images from IndexedDB..."),eh.current)try{let e=[...eu],t=!1;for(let r=0;r<eu.length;r++){let o=eu[r],a="preview_".concat(o.id);try{let o=await eh.current.getImage(a);o&&(console.log("Loaded image for preview ".concat(a)),e[r]={...e[r],screenshot:{...e[r].screenshot,file:o}},t=!0)}catch(e){console.error("Error loading image for ".concat(a,":"),e)}}t&&ex(e)}catch(e){console.error("Error loading images from IndexedDB:",e)}};eu.length>0&&e()},[eu.length]),(0,a.useEffect)(()=>{if(window.localStorage&&s)try{localStorage.setItem("localizedContent",JSON.stringify(s))}catch(e){console.error("Error saving localized content:",e)}},[s]),(0,a.useEffect)(()=>{if(window.localStorage&&r)try{localStorage.setItem("bannerSettings",JSON.stringify(r))}catch(e){console.error("Error saving banner settings:",e)}},[r]),(0,a.useEffect)(()=>{if(window.localStorage&&w)try{localStorage.setItem("textAlignment",w)}catch(e){console.error("Error saving text alignment:",e)}},[w]),(0,a.useEffect)(()=>{if(window.localStorage&&j)try{localStorage.setItem("fontSize",JSON.stringify(j))}catch(e){console.error("Error saving font size:",e)}},[j]),(0,a.useEffect)(()=>{if(window.localStorage&&E)try{localStorage.setItem("lineHeight",JSON.stringify(E))}catch(e){console.error("Error saving line height:",e)}},[E]),(0,a.useEffect)(()=>{if(window.localStorage&&I)try{localStorage.setItem("letterSpacing",JSON.stringify(I))}catch(e){console.error("Error saving letter spacing:",e)}},[I]),(0,a.useEffect)(()=>{if(window.localStorage&&A)try{localStorage.setItem("fontWeight",JSON.stringify(A))}catch(e){console.error("Error saving font weight:",e)}},[A]),(0,a.useEffect)(()=>{if(window.localStorage&&ea)try{localStorage.setItem("fontFamily",JSON.stringify(ea))}catch(e){console.error("Error saving font family:",e)}},[ea]);let eg=(e,t,r)=>{let o={...s};o[e]||(o[e]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),o[e][t]=r,i(o)},ep=(e,t)=>{var r;return s[e]&&(null===(r=s[e])||void 0===r?void 0:r[t])||""},ev=(e,t,r)=>{var o;if(!s[e])return"";let a="preview_".concat(t,"_").concat(r);return(null===(o=s[e])||void 0===o?void 0:o[a])||""},eS=e=>{var t;console.log("Starting upload for preview: ",v),console.log("With position: ",null===(t=eu[v])||void 0===t?void 0:t.devicePosition);let r=[...eu];if(r[v]){let t=r[v];if(t.screenshot={...t.screenshot,file:e},ex(r),eh.current){let r="preview_".concat(t.id);eh.current.saveImage(r,e).catch(e=>console.error("Error saving image to IndexedDB:",e))}console.log("Upload complete, position should still be:",t.devicePosition)}},eF=e=>{let t=eu.find(t=>t.id===e);if(!t)return;let r=eu.length>0?Math.max(...eu.map(e=>e.id))+1:1;ex([...eu,{...t,id:r,name:"Preview ".concat(r),screenshot:{...t.screenshot,file:t.screenshot.file?t.screenshot.file:null}}]);let o={...s};Object.keys(o).forEach(t=>{let a="preview_".concat(r,"_title"),n="preview_".concat(r,"_description");o[t]&&(o[t][a]=o[t]["preview_".concat(e,"_title")]||o[t].title||"",o[t][n]=o[t]["preview_".concat(e,"_description")]||o[t].description||"")}),i(o),b(eu.length),setTimeout(()=>{ei.current&&(ei.current.scrollLeft=ei.current.scrollWidth)},100)},eB=e=>{if(eu.length<=1)return;eh.current&&eh.current.deleteImage("preview_".concat(e)).catch(e=>console.error("Error deleting image from IndexedDB:",e));let t=eu.filter(t=>t.id!==e);ex(t),v>=t.length&&b(t.length-1)},eI=(e,t)=>{let r=[...eu];r[v]&&(r[v]={...r[v],screenshot:{...r[v].screenshot,[e]:t}},ex(r))},eD=e=>{var t,r;if(!e)return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"220px"};let o=e.devicePosition||"center",a=e.deviceScale||100,n=(null===(t=e.verticalOffset)||void 0===t?void 0:t.device)||0,s=(null===(r=e.rotation)||void 0===r?void 0:r.device)||0,i={position:"absolute",width:"".concat(220*a/100,"px")};switch(o){case"top-left":i={...i,top:"-35%",left:"-15%",transform:"translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;case"top-center":i={...i,top:"-35%",left:"50%",transform:"translateX(-50%) translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;case"top-right":i={...i,top:"-35%",right:"-15%",transform:"translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;case"center-left":i={...i,top:"50%",left:"-25%",transform:"translateY(-50%) translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;case"center":i={...i,top:"50%",left:"50%",transform:"translate(-50%, -50%) translateY(".concat(n,"px) rotate(").concat(s,"deg)"),zIndex:"10",maxWidth:"75%",margin:"0 auto"};break;case"center-right":i={...i,top:"50%",right:"-25%",transform:"translateY(-50%) translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;case"bottom-left":i={...i,bottom:"-35%",left:"-15%",transform:"translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;case"bottom-center":i={...i,bottom:"-35%",left:"50%",transform:"translateX(-50%) translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;case"bottom-right":i={...i,bottom:"-35%",right:"-15%",transform:"translateY(".concat(n,"px) rotate(").concat(s,"deg)")};break;default:i={...i,top:"50%",left:"50%",transform:"translate(-50%, -50%) translateY(".concat(n,"px) rotate(").concat(s,"deg)")}}return i},eR=e=>{if("center"===e)return{titlePosition:{top:"8%",left:"50%",transform:"translateX(-50%)",width:"250px",textAlign:"center",zIndex:"5"},descriptionPosition:{bottom:"15%",left:"50%",transform:"translateX(-50%)",width:"250px",textAlign:"center",zIndex:"5"},separateElements:!0};if(e.startsWith("top"))return{titlePosition:{bottom:"15%",left:"50%",transform:"translateX(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1};if(e.startsWith("bottom"));else if(e.endsWith("left"))return{titlePosition:{top:"50%",right:"15%",transform:"translateY(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1};else if(e.endsWith("right"))return{titlePosition:{top:"50%",left:"15%",transform:"translateY(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1};return{titlePosition:{top:"15%",left:"50%",transform:"translateX(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1}},ez=async e=>{if(e.target.files&&e.target.files[0])try{let t=e.target.files[0],r=await t.text(),o=JSON.parse(r);if(!o.global||!o.banners)throw Error("Неверный формат JSON: отсутствуют разделы global или banners");let a={};Object.entries(o.global).forEach(e=>{let[t,r]=e;a[t]||(a[t]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),a[t]={...a[t],title:r.title||"",description:r.description||"",promotionalText:r.promotionalText||"",whatsNew:r.whatsNew||"",keywords:r.keywords||""}}),Object.entries(o.banners).forEach(e=>{let[t,r]=e;a[t]||(a[t]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),Object.entries(r).forEach(e=>{let[r,o]=e;a[t]["".concat(r,"_title")]=o.title||"",a[t]["".concat(r,"_description")]=o.description||""})}),i(a),e.target.value="",alert("JSON успешно импортирован!")}catch(e){console.error("Ошибка при импорте JSON:",e),alert("Ошибка при импорте JSON. Проверьте формат файла.")}};(0,a.useEffect)(()=>{let e=e=>{document.querySelectorAll(".banner-device-target").forEach(t=>{e?t.classList.add("drag-highlight"):t.classList.remove("drag-highlight")})},t=t=>{t.preventDefault(),t.stopPropagation(),e(!0)},r=t=>{t.relatedTarget||e(!1)},o=t=>{var r;if(t.preventDefault(),t.stopPropagation(),e(!1),!(null===(r=t.dataTransfer)||void 0===r?void 0:r.files)||!t.dataTransfer.files[0])return;let o=t.dataTransfer.files[0],s=a(t);if(s){let e=parseInt(s.dataset.bannerId||"-1");if(e>=0){b(e),n(o,e);return}}eS(o)},a=e=>{for(let t of document.querySelectorAll(".banner-device-target")){let r=t.getBoundingClientRect();if(e.clientX>=r.left&&e.clientX<=r.right&&e.clientY>=r.top&&e.clientY<=r.bottom)return t}return null},n=(e,t)=>{console.log("Uploading screenshot to banner ".concat(t));let r=[...eu];if(r[t]){let o=r[t];if(o.screenshot={...o.screenshot,file:e},ex(r),eh.current){let t="preview_".concat(o.id);eh.current.saveImage(t,e).catch(e=>console.error("Error saving image to IndexedDB:",e))}}};return window.addEventListener("dragover",t),window.addEventListener("dragleave",r),window.addEventListener("drop",o),()=>{window.removeEventListener("dragover",t),window.removeEventListener("dragleave",r),window.removeEventListener("drop",o)}},[v,eu]);let[eA,eL]=(0,a.useState)(()=>ew.reduce((e,t)=>(e[t.code]=!0,e),{})),eP=e=>{eL(t=>({...t,[e]:!t[e]}))},eT=e=>{let t={};ew.forEach(r=>{t[r.code]=e}),eL(t)},eJ=async()=>{c(!0),p(0);try{console.log("Начинаем процесс экспорта..."),eh.current||(console.log("Инициализируем IndexedDB..."),eh.current=new eC,await new Promise(e=>setTimeout(e,500)));let r=new(et()),o=Object.keys(eA).filter(e=>eA[e]);if(0===o.length){alert("Пожалуйста, выберите хотя бы один язык для экспорта"),c(!1);return}console.log("Выбранные языки для экспорта:",o);let a=eu.length*o.length,n=0;for(let e of o){let o=r.folder(e);if(o)for(let r=0;r<eu.length;r++)try{t(e),b(r),await new Promise(e=>setTimeout(e,100));let s=eu[r];console.log("Экспорт баннера #".concat(s.id," для языка ").concat(e));let i=document.getElementById("preview-".concat(s.id));if(!i){console.error("Не найден элемент с ID preview-".concat(s.id));continue}let l=i.cloneNode(!0);document.body.appendChild(l);try{l.querySelectorAll(".banner-controls, .banner-edit-icons, button").forEach(e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)}),l.querySelectorAll('[class*="hover:"]').forEach(e=>{let t=e.className.split(" ").filter(e=>!e.includes("hover:"));e.className=t.join(" ")}),l.querySelectorAll(".banner-content").forEach(e=>{e instanceof HTMLElement&&e.classList.remove("border","border-blue-500","shadow-xl")}),l.style.position="fixed",l.style.left="0",l.style.top="0",l.style.zIndex="-9999",l.style.margin="0",l.style.padding="0",l.style.borderRadius="0",l.style.width="323px",l.style.height="699px",l.style.boxSizing="border-box",l.style.overflow="hidden",l.style.pointerEvents="none";let e=await ek()(l,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:s.backgroundColor||"#ffffff",width:323,height:699,logging:!1,removeContainer:!1,x:0,y:0,scrollX:0,scrollY:0}),t=document.createElement("canvas");t.width=1290,t.height=2796;let r=t.getContext("2d");r&&(r.clearRect(0,0,t.width,t.height),r.fillStyle=s.backgroundColor||"#ffffff",r.fillRect(0,0,t.width,t.height),r.drawImage(e,0,0,1290,2796));let i=await new Promise((e,r)=>{t.toBlob(t=>{t?e(t):r(Error("Failed to create blob"))},"image/png",1)});o.file("banner_".concat(s.id,".png"),i),n++,p(Math.floor(n/a*100))}finally{l.parentNode&&document.body.removeChild(l)}}catch(e){console.error("Ошибка при экспорте баннера ".concat(eu[r].id,":"),e)}}t(e),b(v),console.log("Генерация архива...");let s=await r.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}});console.log("Размер архива: ".concat(s.size," байт")),(0,Q.saveAs)(s,"app_banners.zip"),console.log("Экспорт завершен успешно!")}catch(e){console.error("Ошибка при экспорте:",e),alert("Произошла ошибка при экспорте. Пожалуйста, попробуйте снова.")}finally{c(!1),p(0)}},eW=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{color:"title"===e?r.titleColor:r.descriptionColor,fontFamily:"title"===e?ea.title:ea.description,fontWeight:"title"===e?A.title:A.description,textAlign:w,fontSize:"".concat("title"===e?j.title:j.description,"px"),lineHeight:"title"===e?E.title:E.description,letterSpacing:"".concat("title"===e?I.title:I.description,"%"),transform:t?"rotate(".concat(t,"deg)"):void 0,transformOrigin:"center",display:"inline-block",width:"100%"}},[e_,eY]=(0,a.useState)(null),eM=(e,t,r)=>{eY({type:e,value:r,bannerId:t}),eX.current&&eH(eX.current)},eU=()=>{e_&&(eV(e,e_.bannerId,e_.type,e_.value),eY(null))},eX=(0,a.useRef)(null),eH=e=>{e&&(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"))};(0,a.useEffect)(()=>{e_&&eX.current&&eH(eX.current)},[e_]);let eG=(t,r)=>{var a,n,s,i;let l=r===v,c=t.devicePosition||"center";console.log("Rendering banner ".concat(r,", device position:"),c);let{titlePosition:d,descriptionPosition:h,separateElements:f}=eR(c),u=t.verticalOffset||{combined:0,title:0,description:0,device:0},x=t.horizontalOffset||{combined:0,title:0,description:0},g=t.rotation||{device:0,title:0,description:0,textBlock:0},p=function(e,r,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=e_&&e_.type===e&&e_.bannerId===t.id,i={...n,width:"calc(100% + 30px)",display:"flex",flexDirection:"column",alignItems:"center"===w?"center":"right"===w?"flex-end":"flex-start",justifyContent:"flex-start"},c={...a,textAlign:w,width:"100%"};return s?(0,o.jsx)("div",{style:i,children:(0,o.jsx)("textarea",{ref:eX,className:"w-full bg-transparent outline-none resize-none p-1",value:e_.value,onChange:e=>{eY({...e_,value:e.target.value}),eH(e.target)},onBlur:eU,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eU())},autoFocus:!0,style:{...c,height:"auto",minHeight:"title"===e?"2.5rem":"3.5rem",display:"block",overflow:"hidden",border:"none",background:"rgba(59, 130, 246, 0.05)",verticalAlign:"top"}})}):(0,o.jsx)("div",{className:"cursor-text w-full",onClick:o=>{l&&(ec(e),eM(e,t.id,r))},onDoubleClick:e=>{l&&e.target===e.currentTarget&&(e.stopPropagation(),ec("text-block"))},style:i,children:"title"===e?(0,o.jsx)("h2",{className:"text-2xl font-bold text-".concat(w),style:c,children:r||"Title"}):(0,o.jsx)("p",{className:"text-base text-".concat(w),style:c,children:r||"Description"})})};return(0,o.jsx)("div",{id:"preview-".concat(t.id),className:"relative rounded-lg overflow-hidden banner border ".concat(l?"shadow-xl border-transparent":"border-transparent"),onClick:()=>b(r),style:{backgroundColor:t.backgroundColor||"#007AFF",width:"323px",height:"699px",position:"relative",margin:"0 15px",boxSizing:"border-box"},children:(0,o.jsxs)("div",{className:"w-full h-full relative",style:{backgroundColor:t.backgroundColor},children:[f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"absolute ".concat(l?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50 rounded-md p-1":""," ").concat(l&&(null==ed?void 0:ed.elementType)!=="title"?"cursor-grab":""," ").concat((null==ed?void 0:ed.elementType)==="title"?"cursor-grabbing":""),style:{...d,transform:"".concat(d.transform||""," translateY(").concat(u.title,"px) translateX(").concat(x.title,"px)")},onMouseDown:e=>l&&e$(e,t.id,"title"),onDoubleClick:e=>{l&&(e.stopPropagation(),ec("title"))},children:p("title",ev(e,t.id,"title"),eW("title",g.title))}),(0,o.jsx)("div",{className:"absolute ".concat(l?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50 rounded-md p-1":""," ").concat(l&&(null==ed?void 0:ed.elementType)!=="description"?"cursor-grab":""," ").concat((null==ed?void 0:ed.elementType)==="description"?"cursor-grabbing":""),style:{...h,transform:"".concat(h.transform||""," translateY(").concat(u.description,"px) translateX(").concat(x.description,"px)")},onMouseDown:e=>l&&e$(e,t.id,"description"),onDoubleClick:e=>{l&&(e.stopPropagation(),ec("description"))},children:p("description",ev(e,t.id,"description"),eW("description",g.description))})]}):(0,o.jsxs)("div",{className:"absolute ".concat(l?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50 rounded-md p-1":""," ").concat(l&&(null==ed?void 0:ed.elementType)!=="text-block"?"cursor-grab":""," ").concat((null==ed?void 0:ed.elementType)==="text-block"?"cursor-grabbing":""),style:{...d,transform:"".concat(d.transform||""," translateY(").concat(u.combined,"px) translateX(").concat(x.combined,"px) rotate(").concat(g.textBlock,"deg)")},onMouseDown:e=>l&&e$(e,t.id,"text-block"),onClick:e=>{l&&e.target===e.currentTarget&&ec("text-block")},onDoubleClick:e=>{l&&e.target===e.currentTarget&&(e.stopPropagation(),ec("text-block"))},children:[p("title",ev(e,t.id,"title"),eW("title"),{marginBottom:"0.5rem"}),p("description",ev(e,t.id,"description"),eW("description"))]}),(0,o.jsx)("div",{className:"absolute banner-device-target ".concat(l?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50":""," ").concat(l&&(null==ed?void 0:ed.elementType)!=="device"?"cursor-grab":""," ").concat((null==ed?void 0:ed.elementType)==="device"?"cursor-grabbing":""),"data-banner-id":r,style:eD(t),onMouseDown:e=>l&&e$(e,t.id,"device"),onDoubleClick:e=>{l&&(e.stopPropagation(),ec("device"))},children:(null===(a=t.screenshot)||void 0===a?void 0:a.file)?(0,o.jsx)("div",{style:{borderWidth:"".concat(t.screenshot.borderWidth,"px"),borderStyle:"solid",borderColor:t.screenshot.borderColor,borderRadius:"".concat(t.screenshot.borderRadius,"px"),overflow:"hidden"},children:(0,o.jsx)("img",{src:URL.createObjectURL(t.screenshot.file)||"/placeholder.svg",alt:"Screenshot ".concat(t.id),style:{width:"100%",display:"block"}})}):(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",style:{width:"100%",height:"400px",borderWidth:"".concat((null===(n=t.screenshot)||void 0===n?void 0:n.borderWidth)||8,"px"),borderStyle:"solid",borderColor:(null===(s=t.screenshot)||void 0===s?void 0:s.borderColor)||"#000000",borderRadius:"".concat((null===(i=t.screenshot)||void 0===i?void 0:i.borderRadius)||30,"px")},children:[l&&(0,o.jsx)("input",{type:"file",id:"screenshot-upload-".concat(t.id),className:"hidden",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&eS(e.target.files[0])}}),l?(0,o.jsxs)("label",{htmlFor:"screenshot-upload-".concat(t.id),className:"cursor-pointer flex flex-col items-center",children:[(0,o.jsx)(X.A,{className:"h-12 w-12 text-gray-400"}),(0,o.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"Click or drag & drop to upload screenshot"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X.A,{className:"h-12 w-12 text-gray-400"}),(0,o.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"No screenshot"})]})]})}),l&&(0,o.jsxs)("div",{className:"absolute top-4 right-4 flex gap-1",children:[(0,o.jsx)(m,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-black bg-opacity-30 hover:bg-opacity-50 text-white rounded-full",onClick:e=>{e.stopPropagation(),eF(t.id)},children:(0,o.jsx)(H.A,{className:"h-4 w-4"})}),eu.length>1&&(0,o.jsx)(m,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-black bg-opacity-30 hover:bg-opacity-50 text-white rounded-full",onClick:e=>{e.stopPropagation(),eB(t.id)},children:(0,o.jsx)(G.A,{className:"h-4 w-4"})})]})]})},"banner-".concat(t.id))};(0,a.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n      .drag-highlight {\n        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5), 0 0 0 6px rgba(59, 130, 246, 0.3);\n        transition: box-shadow 0.2s ease-in-out;\n      }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,a.useEffect)(()=>{if(console.log("Loading banner settings from localStorage"),window.localStorage)try{let e=localStorage.getItem("bannerSettings");if(e){let t=JSON.parse(e);n(t)}}catch(e){console.error("Error parsing banner settings:",e)}},[]),(0,a.useEffect)(()=>{if(console.log("Loading text alignment from localStorage"),window.localStorage)try{let e=localStorage.getItem("textAlignment");e&&y(e)}catch(e){console.error("Error loading text alignment:",e)}},[]),(0,a.useEffect)(()=>{if(console.log("Loading font size from localStorage"),window.localStorage)try{let e=localStorage.getItem("fontSize");e&&C(JSON.parse(e))}catch(e){console.error("Error parsing font size:",e)}},[]),(0,a.useEffect)(()=>{if(console.log("Loading line height and letter spacing from localStorage"),window.localStorage)try{let e=localStorage.getItem("lineHeight");e&&B(JSON.parse(e));let t=localStorage.getItem("letterSpacing");t&&z(JSON.parse(t))}catch(e){console.error("Error parsing line height or letter spacing:",e)}},[]);let eV=(e,t,r,o)=>{console.log("Updating banner text: ".concat(e,", id=").concat(t,", ").concat(r,"=").concat(o));let a={...s};a[e]||(a[e]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""});let n="preview_".concat(t,"_").concat(r);a[e][n]=o,i(a)},[eq,eK]=(0,a.useState)(!1);(0,a.useEffect)(()=>{eK(!0)},[]);let e$=(e,t,r)=>{e.preventDefault(),e.stopPropagation();let o=eu.find(e=>e.id===t);if(!o)return;let a=0,n=0,s=o.verticalOffset||{combined:0,title:0,description:0,device:0},i=o.horizontalOffset||{combined:0,title:0,description:0};"title"===r?(a=i.title,n=s.title):"description"===r?(a=i.description,n=s.description):"device"===r?(a=0,n=s.device):"text-block"===r&&(a=i.combined,n=s.combined),("title"===r||"description"===r||"device"===r||"text-block"===r)&&ec("text-block"===r?"title":r),em({bannerId:t,elementType:r,initialMouseX:e.clientX,initialMouseY:e.clientY,initialElementOffsetX:a,initialElementOffsetY:n})},eZ=(0,a.useCallback)(e=>{if(!ed)return;let t=e.clientX-ed.initialMouseX,r=e.clientY-ed.initialMouseY,o=ed.initialElementOffsetX+t,a=ed.initialElementOffsetY+r;ex(e=>e.map(e=>{if(e.id===ed.bannerId){let t={...e},r=ed.elementType;return"title"===r?(t.horizontalOffset={...e.horizontalOffset,title:o},t.verticalOffset={...e.verticalOffset,title:a}):"description"===r?(t.horizontalOffset={...e.horizontalOffset,description:o},t.verticalOffset={...e.verticalOffset,description:a}):"device"===r?t.verticalOffset={...e.verticalOffset,device:a}:"text-block"===r&&(t.horizontalOffset={...e.horizontalOffset,combined:o},t.verticalOffset={...e.verticalOffset,combined:a}),t}return e}))},[ed,ex]),eQ=(0,a.useCallback)(()=>{ed&&em(null)},[ed]);(0,a.useEffect)(()=>(ed?(window.addEventListener("mousemove",eZ),window.addEventListener("mouseup",eQ),document.body.style.userSelect="none"):(window.removeEventListener("mousemove",eZ),window.removeEventListener("mouseup",eQ),document.body.style.userSelect=""),()=>{window.removeEventListener("mousemove",eZ),window.removeEventListener("mouseup",eQ),document.body.style.userSelect=""}),[ed,eZ,eQ]);let[e0,e1]=(0,a.useState)([]),e2=["Arial","Helvetica","Times New Roman","Georgia","Courier New","SF Pro"];(0,a.useEffect)(()=>{if("undefined"==typeof document)return;let e="custom-fonts-style",t=document.getElementById(e);t||((t=document.createElement("style")).id=e,document.head.appendChild(t)),t.innerHTML=e0.map(e=>"@font-face { font-family: '".concat(e.name,"'; src: url(").concat(e.data,"); font-display: swap; }")).join("\n")},[e0]);let e4=e=>{let t=new FileReader;t.onload=()=>{let r=t.result,o=e.name.replace(/\.[^/.]+$/,"");e1(e=>[...e,{name:o,data:r}]),ef.current&&ef.current.saveFont(o,r).catch(e=>console.error("Save font error",e))},t.readAsDataURL(e)};return(0,o.jsx)(o.Fragment,{children:eq?(0,o.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,o.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white border-b py-4 px-6 z-50 shadow-sm",children:(0,o.jsx)("div",{className:"container mx-auto",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold",children:"ASB Generator v2"}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsxs)(D,{children:[(0,o.jsx)(R,{asChild:!0,children:(0,o.jsxs)(m,{variant:"outline",children:[(0,o.jsx)(V.A,{className:"mr-2 h-4 w-4"}),"Import JSON"]})}),(0,o.jsxs)(L,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,o.jsx)(P,{children:(0,o.jsx)(J,{children:"Import Localized Content"})}),(0,o.jsx)("div",{className:"space-y-4 py-4",children:(0,o.jsx)("div",{className:"space-y-4 py-4",children:(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{children:"Импорт из файла"}),(0,o.jsx)(h,{type:"file",accept:".json",onChange:ez,className:"mt-2"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{children:"Или вставьте JSON текст"}),(0,o.jsx)(g,{value:d,onChange:e=>f(e.target.value),placeholder:"Вставьте JSON здесь...",className:"mt-2 min-h-[200px]"}),(0,o.jsx)(m,{onClick:()=>{try{let e=JSON.parse(d);if(!e.global||!e.banners)throw Error("Неверный формат JSON: отсутствуют разделы global или banners");let t={};Object.entries(e.global).forEach(e=>{let[r,o]=e;t[r]||(t[r]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),t[r]={...t[r],title:o.title||"",description:o.description||"",promotionalText:o.promotionalText||"",whatsNew:o.whatsNew||"",keywords:o.keywords||""}}),Object.entries(e.banners).forEach(e=>{let[r,o]=e;t[r]||(t[r]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),Object.entries(o).forEach(e=>{let[o,a]=e;t[r]["".concat(o,"_title")]=a.title||"",t[r]["".concat(o,"_description")]=a.description||""})}),i(t),f(""),alert("JSON успешно импортирован!")}catch(e){console.error("Ошибка при импорте JSON:",e),alert("Ошибка при импорте JSON. Проверьте формат текста.")}},className:"mt-2",disabled:!d,children:"Импортировать из текста"})]})]})})})]})]}),(0,o.jsxs)(m,{variant:"outline",onClick:()=>{let e={global:{},banners:{}};ew.forEach(t=>{let{code:r}=t;e.global[r]||(e.global[r]={title:"ru"===r&&ep(r,"title")||"",description:"ru"===r&&ep(r,"description")||"",promotionalText:"ru"===r&&ep(r,"promotionalText")||"",whatsNew:"ru"===r&&ep(r,"whatsNew")||"",keywords:"ru"===r&&ep(r,"keywords")||""}),e.banners[r]||(e.banners[r]={}),eu.forEach(t=>{let o="preview_".concat(t.id);e.banners[r][o]={title:"ru"===r&&ev(r,t.id,"title")||"",description:"ru"===r&&ev(r,t.id,"description")||""}})});let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download="localized_content.json",document.body.appendChild(o),o.click(),setTimeout(()=>{document.body.removeChild(o),URL.revokeObjectURL(r)},0)},children:[(0,o.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"Export JSON"]}),(0,o.jsx)(eb,{languages:ew,activeLanguage:e,onChange:e=>{if(t(e),!s[e]){let t={...s};t[e]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""},i(t)}}}),(0,o.jsxs)(D,{children:[(0,o.jsx)(R,{asChild:!0,children:(0,o.jsx)(m,{variant:"default",disabled:l,children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(K.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Exporting ",Math.round(u),"%"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($.A,{className:"mr-2 h-4 w-4"}),"Export All Images"]})})}),(0,o.jsxs)(L,{className:"sm:max-w-md",children:[(0,o.jsxs)(P,{children:[(0,o.jsx)(J,{children:"Экспорт изображений"}),(0,o.jsx)(W,{children:"Выберите локали для экспорта изображений"})]}),(0,o.jsxs)("div",{className:"py-4",children:[(0,o.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,o.jsx)(m,{variant:"outline",size:"sm",onClick:()=>eT(!0),children:"Выбрать все"}),(0,o.jsx)(m,{variant:"outline",size:"sm",onClick:()=>eT(!1),children:"Отменить все"})]}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-4",children:ew.map(e=>(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",id:"lang-".concat(e.code),checked:eA[e.code],onChange:()=>eP(e.code),className:"rounded border-gray-300"}),(0,o.jsxs)("label",{htmlFor:"lang-".concat(e.code),className:"text-sm font-medium",children:[e.name," (",e.code,")"]})]},e.code))})]}),(0,o.jsx)(T,{children:(0,o.jsx)(m,{onClick:eJ,disabled:l||Object.values(eA).every(e=>!e),children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(K.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Экспорт ",Math.round(u),"%"]}):"Экспортировать"})})]})]})]})]})})}),(0,o.jsx)("div",{className:"flex-grow container mx-auto px-4 py-6 mt-[116px]",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-6",children:[(0,o.jsx)("div",{children:(0,o.jsx)(er,{className:"overflow-hidden",children:(0,o.jsx)(eo,{className:"p-0",children:(0,o.jsx)("div",{className:"bg-gray-100 p-6 flex flex-col min-h-[800px]",onClick:e=>{e.target===e.currentTarget&&ec("banner")},children:(0,o.jsxs)("div",{ref:ei,className:"flex overflow-x-auto pb-4 pt-2 px-2 -mx-2 mb-4 snap-x",style:{scrollbarWidth:"thin"},children:[eu.map((e,t)=>eG(e,t)),(0,o.jsx)("div",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-primary hover:bg-gray-50",style:{width:"323px",height:"699px",flexShrink:0,margin:"0 8px"},onClick:()=>{let e=eu.length>0?Math.max(...eu.map(e=>e.id))+1:1,t=["#FFD700","#F5F5DC","#FF6347","#FFDAB9","#87CEEB","#98FB98","#DDA0DD","#F0E68C"],r=t[Math.floor(Math.random()*t.length)];ex([...eu,{id:e,name:"Preview ".concat(e),backgroundColor:r,devicePosition:"center",deviceScale:100,verticalOffset:{combined:0,title:0,description:0,device:0},horizontalOffset:{combined:0,title:0,description:0},screenshot:{file:null,borderColor:"#000000",borderWidth:8,borderRadius:30}}]),setTimeout(()=>{ei.current&&(ei.current.scrollLeft=ei.current.scrollWidth)},100)},children:(0,o.jsx)(Z.A,{className:"h-12 w-12 text-gray-400"})})]})})})})}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"fixed top-0 right-0 h-screen w-[320px] z-40",style:{paddingTop:"65px"},children:(0,o.jsx)(er,{className:"h-full rounded-none border-l border-t-0 border-r-0 border-b-0",children:(0,o.jsx)(eo,{className:"p-6 h-full overflow-y-auto",children:(()=>{var t,a,s,i,l,c,d,m,f,u,p,b;let E=eu[v]||{};switch(el){case"none":case"banner":return(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-base font-medium font-mono",children:"Banner Settings"}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"Background Color"}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(eN,{color:E.backgroundColor||"#007AFF",onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],backgroundColor:e},ex(t))}})})]}),(0,o.jsx)(en,{className:"my-4"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h4",{className:"text-xs font-medium text-gray-500 font-mono",children:"Localized App Information"}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"Promotional Text"}),(0,o.jsx)(g,{value:ep(e,"promotionalText")||"",onChange:t=>{eg(e,"promotionalText",t.target.value)},className:"mt-1",rows:4,placeholder:"Promotional text in ".concat(e)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"Description"}),(0,o.jsx)(g,{value:ep(e,"description")||"",onChange:t=>{eg(e,"description",t.target.value)},className:"mt-1",rows:4,placeholder:"Description in ".concat(e)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"What's New in This Version"}),(0,o.jsx)(g,{value:ep(e,"whatsNew")||"",onChange:t=>{eg(e,"whatsNew",t.target.value)},className:"mt-1",rows:4,placeholder:"What's new in ".concat(e)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"Keywords"}),(0,o.jsx)(h,{value:ep(e,"keywords")||"",onChange:t=>{eg(e,"keywords",t.target.value)},className:"mt-1",placeholder:"Keywords in ".concat(e)})]})]})]})});case"title":case"description":let B="title"===el;return(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h3",{className:"text-base font-semibold font-mono",children:B?"Заголовок":"Описание"}),(0,o.jsx)(x,{className:"text-xs text-gray-500 font-mono",children:B?"Текст заголовка":"Текст описания"}),(0,o.jsx)(g,{value:ev(e,E.id,B?"title":"description")||"",onChange:t=>{eV(e,E.id,B?"title":"description",t.target.value)},className:"mt-1",placeholder:B?"Введите заголовок...":"Введите описание..."})]}),(0,o.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:B?"Вертикальное смещение заголовка":"Вертикальное смещение описания"})}),(0,o.jsx)(eO,{value:(null===(t=E.verticalOffset)||void 0===t?void 0:t[B?"title":"description"])||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],verticalOffset:{...t[v].verticalOffset,[B?"title":"description"]:e}},ex(t))},min:-300,max:300,unit:"px"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:B?"Горизонтальное смещение заголовка":"Горизонтальное смещение описания"})}),(0,o.jsx)(eO,{value:(null===(a=E.horizontalOffset)||void 0===a?void 0:a[B?"title":"description"])||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],horizontalOffset:{...t[v].horizontalOffset,[B?"title":"description"]:e}},ex(t))},min:-300,max:300,unit:"px"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:B?"Поворот заголовка":"Поворот описания"})}),(0,o.jsx)(eO,{value:(null===(s=E.rotation)||void 0===s?void 0:s[B?"title":"description"])||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],rotation:{...t[v].rotation,[B?"title":"description"]:e}},ex(t))},min:-180,max:180,unit:"\xb0"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:B?"Размер шрифта заголовка":"Размер шрифта описания"})}),(0,o.jsx)(eO,{value:j[B?"title":"description"],onChange:e=>{C({...j,[B?"title":"description"]:e})},min:8,max:120,unit:"px"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono mb-2 block",children:B?"Начертание заголовка":"Начертание описания"}),(0,o.jsxs)(N,{value:A[B?"title":"description"].toString(),onValueChange:e=>{ee({...A,[B?"title":"description"]:parseInt(e)})},children:[(0,o.jsx)(k,{className:"w-full",children:(0,o.jsx)(S,{placeholder:"Вес шрифта"})}),(0,o.jsx)(O,{children:[100,200,300,400,500,600,700,800,900].map(e=>(0,o.jsx)(F,{value:e.toString(),children:e},e))})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:B?"Шрифт заголовка":"Шрифт описания"}),(0,o.jsxs)(N,{value:ea[B?"title":"description"],onValueChange:e=>{es({...ea,[B?"title":"description"]:e})},children:[(0,o.jsx)(k,{className:"w-full",children:(0,o.jsx)(S,{placeholder:"Выберите шрифт"})}),(0,o.jsx)(O,{children:[...e2,...e0.map(e=>e.name)].map(e=>(0,o.jsx)(F,{value:e,children:e},e))})]}),(0,o.jsx)(h,{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"mt-2",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0],r=t.name.replace(/\.[^/.]+$/,"");e4(t),es(e=>({...e,[B?"title":"description"]:r}))}}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"Выравнивание текста"}),(0,o.jsx)("div",{className:"flex gap-0.5 mt-1",children:[{value:"left",icon:(0,o.jsx)(_.A,{className:"h-4 w-4"})},{value:"center",icon:(0,o.jsx)(Y.A,{className:"h-4 w-4"})},{value:"right",icon:(0,o.jsx)(M.A,{className:"h-4 w-4"})}].map(e=>{let{value:t,icon:r}=e;return(0,o.jsx)("button",{type:"button",onClick:()=>y(t),className:"p-1 rounded-md border ".concat(w===t?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"),title:"left"===t?"По левому краю":"center"===t?"По центру":"По правому краю",children:r},t)})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:B?"Цвет заголовка":"Цвет описания"}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(eN,{color:B?r.titleColor:r.descriptionColor,onChange:e=>{n({...r,[B?"titleColor":"descriptionColor"]:e})}})})]})]})]})});case"text-block":return(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("h3",{className:"text-base font-semibold font-mono",children:"Блок текста"}),(0,o.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:"Вертикальное смещение блока"})}),(0,o.jsx)(eO,{value:(null===(i=E.verticalOffset)||void 0===i?void 0:i.combined)||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],verticalOffset:{...t[v].verticalOffset,combined:e}},ex(t))},min:-300,max:300,unit:"px"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:"Горизонтальное смещение блока"})}),(0,o.jsx)(eO,{value:(null===(l=E.horizontalOffset)||void 0===l?void 0:l.combined)||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],horizontalOffset:{...t[v].horizontalOffset,combined:e}},ex(t))},min:-300,max:300,unit:"px"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"font-mono",children:"Поворот блока"})}),(0,o.jsx)(eO,{value:(null===(c=E.rotation)||void 0===c?void 0:c.textBlock)||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],rotation:{...t[v].rotation,textBlock:e}},ex(t))},min:-180,max:180,unit:"\xb0"})]})]})]})});case"device":return(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-base font-medium font-mono",children:"Device Settings"}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"Position"}),(0,o.jsx)("div",{className:"grid grid-cols-3 gap-0.5 mt-1",children:ej.map(e=>(0,o.jsx)("button",{type:"button",onClick:()=>{let t=[...eu];t[v]&&(t[v]={...t[v],devicePosition:e.value},ex(t))},className:"p-0.5 rounded-md border ".concat(E.devicePosition===e.value?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"),title:e.label,children:{"top-left":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"4",y:"4",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"14",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"top-center":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"9",y:"4",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"14",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"top-right":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"14",y:"4",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"14",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"center-left":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"4",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"14",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),center:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"4",y:"2",width:"16",height:"4",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"9",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"18",width:"16",height:"4",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]}),"center-right":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"14",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"bottom-left":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"4",y:"14",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"4",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"bottom-center":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"9",y:"14",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"4",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"bottom-right":(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,o.jsx)("rect",{x:"14",y:"14",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,o.jsx)("rect",{x:"4",y:"4",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]})}[e.value]||(0,o.jsx)(U.A,{className:"h-4 w-4 mx-auto"})},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:"Device Scale"})}),(0,o.jsx)(eO,{value:E.deviceScale||100,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],deviceScale:e},ex(t))},min:50,max:150,unit:"%"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:"Vertical Position"})}),(0,o.jsx)(eO,{value:(null===(m=eu[v])||void 0===m?void 0:null===(d=m.verticalOffset)||void 0===d?void 0:d.device)||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],verticalOffset:{...t[v].verticalOffset,device:e}},ex(t))},min:-300,max:300,unit:"px"})]}),(0,o.jsx)(en,{}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-base font-medium font-mono",children:"Border Settings"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{className:"text-xs font-mono",children:"Border Color"}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(eN,{color:(null===(f=E.screenshot)||void 0===f?void 0:f.borderColor)||"#000000",onChange:e=>eI("borderColor",e)})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:"Border Width"})}),(0,o.jsx)(eO,{value:(null===(u=E.screenshot)||void 0===u?void 0:u.borderWidth)||8,onChange:e=>eI("borderWidth",e),min:0,max:20,unit:"px"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:"Border Radius"})}),(0,o.jsx)(eO,{value:(null===(p=E.screenshot)||void 0===p?void 0:p.borderRadius)||30,onChange:e=>eI("borderRadius",e),min:0,max:60,unit:"px"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)(x,{className:"text-xs font-mono",children:"Rotation"})}),(0,o.jsx)(eO,{value:(null===(b=E.rotation)||void 0===b?void 0:b.device)||0,onChange:e=>{let t=[...eu];t[v]&&(t[v]={...t[v],rotation:{...t[v].rotation,device:e}},ex(t))},min:-360,max:360,unit:"\xb0"})]})]})});default:return null}})()})})})})]})})]}):null})}}},e=>{var t=t=>e(e.s=t);e.O(0,[316,930,441,517,358],()=>t(4697)),_N_E=e.O()}]);