(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3717:(e,t,o)=>{Promise.resolve().then(o.bind(o,6946))},6946:(e,t,o)=>{"use strict";o.d(t,{default:()=>ex});var r=o(7312),n=o(6828),a=o(2317),l=o(1027),s=o(3463),i=o(9795);function c(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,i.QP)((0,s.$)(t))}let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=n.forwardRef((e,t)=>{let{className:o,variant:n,size:l,asChild:s=!1,...i}=e,h=s?a.DX:"button";return(0,r.jsx)(h,{className:c(d({variant:n,size:l,className:o})),ref:t,...i})});h.displayName="Button";let u=n.forwardRef((e,t)=>{let{className:o,type:n,...a}=e;return(0,r.jsx)("input",{type:n,className:c("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:t,...a})});u.displayName="Input";var m=o(6195);let f=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),g=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(m.b,{ref:t,className:c(f(),o),...n})});g.displayName=m.b.displayName;let x=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)("textarea",{className:c("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:t,...n})});x.displayName="Textarea";var p=o(5307);let v=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsxs)(p.bL,{ref:t,className:c("relative flex w-full touch-none select-none items-center",o),...n,children:[(0,r.jsx)(p.CC,{className:"relative h-0.5 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(p.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(p.zi,{className:"block h-2.5 w-2.5 rounded-full border border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});v.displayName=p.bL.displayName;var b=o(6217),w=o(767);let y=b.bL,j=b.l9,N=b.ZL;b.bm;let S=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(b.hJ,{ref:t,className:c("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",o),...n})});S.displayName=b.hJ.displayName;let C=n.forwardRef((e,t)=>{let{className:o,children:n,...a}=e;return(0,r.jsxs)(N,{children:[(0,r.jsx)(S,{}),(0,r.jsxs)(b.UC,{ref:t,className:c("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o),...a,children:[n,(0,r.jsxs)(b.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(w.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});C.displayName=b.UC.displayName;let k=e=>{let{className:t,...o}=e;return(0,r.jsx)("div",{className:c("flex flex-col space-y-1.5 text-center sm:text-left",t),...o})};k.displayName="DialogHeader";let D=e=>{let{className:t,...o}=e;return(0,r.jsx)("div",{className:c("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...o})};D.displayName="DialogFooter";let E=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(b.hE,{ref:t,className:c("text-lg font-semibold leading-none tracking-tight",o),...n})});E.displayName=b.hE.displayName;let z=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(b.VY,{ref:t,className:c("text-sm text-muted-foreground",o),...n})});z.displayName=b.VY.displayName;var F=o(6954),O=o(2316),B=o(3920),I=o(5686),T=o(8684),R=o(4857),L=o(4505),A=o(4710),P=o(3473),_=o(8003),W=o(670),J=o.n(W);let Y=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)("div",{ref:t,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",o),...n})});Y.displayName="Card",n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)("div",{ref:t,className:c("flex flex-col space-y-1.5 p-6",o),...n})}).displayName="CardHeader",n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)("div",{ref:t,className:c("text-2xl font-semibold leading-none tracking-tight",o),...n})}).displayName="CardTitle",n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)("div",{ref:t,className:c("text-sm text-muted-foreground",o),...n})}).displayName="CardDescription";let M=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)("div",{ref:t,className:c("p-6 pt-0",o),...n})});M.displayName="CardContent",n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)("div",{ref:t,className:c("flex items-center p-6 pt-0",o),...n})}).displayName="CardFooter";var U=o(434);let X=n.forwardRef((e,t)=>{let{className:o,orientation:n="horizontal",decorative:a=!0,...l}=e;return(0,r.jsx)(U.b,{ref:t,decorative:a,orientation:n,className:c("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",o),...l})});X.displayName=U.b.displayName;var H=o(6246);let q=H.bL,G=H.l9,V=n.forwardRef((e,t)=>{let{className:o,align:n="center",sideOffset:a=4,...l}=e;return(0,r.jsx)(H.ZL,{children:(0,r.jsx)(H.UC,{ref:t,align:n,sideOffset:a,className:c("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...l})})});V.displayName=H.UC.displayName;var K=o(7859),Q=o(853);let Z=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(K.uB,{ref:t,className:c("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o),...n})});Z.displayName=K.uB.displayName;let $=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(Q.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(K.uB.Input,{ref:t,className:c("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",o),...n})]})});$.displayName=K.uB.Input.displayName;let ee=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(K.uB.List,{ref:t,className:c("max-h-[300px] overflow-y-auto overflow-x-hidden",o),...n})});ee.displayName=K.uB.List.displayName;let et=n.forwardRef((e,t)=>(0,r.jsx)(K.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));et.displayName=K.uB.Empty.displayName;let eo=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(K.uB.Group,{ref:t,className:c("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",o),...n})});eo.displayName=K.uB.Group.displayName,n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(K.uB.Separator,{ref:t,className:c("-mx-1 h-px bg-border",o),...n})}).displayName=K.uB.Separator.displayName;let er=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,r.jsx)(K.uB.Item,{ref:t,className:c("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o),...n})});er.displayName=K.uB.Item.displayName;var en=o(5800),ea=o(8867);function el(e){var t;let{languages:o,activeLanguage:a,onChange:l}=e,[s,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[m,f]=(0,n.useState)(""),[x,p]=(0,n.useState)(""),v=(null===(t=o.find(e=>e.code===a))||void 0===t?void 0:t.name)||a;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(q,{open:s,onOpenChange:i,children:[(0,r.jsx)(G,{asChild:!0,children:(0,r.jsxs)(h,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-[200px] justify-between",children:[v,(0,r.jsx)(en.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,r.jsx)(V,{className:"w-[200px] p-0",children:(0,r.jsxs)(Z,{children:[(0,r.jsx)($,{placeholder:"Search language..."}),(0,r.jsxs)(ee,{children:[(0,r.jsx)(et,{children:"No language found."}),(0,r.jsxs)(eo,{children:[o.map(e=>(0,r.jsxs)(er,{value:e.code,onSelect:()=>{l(e.code),i(!1)},children:[(0,r.jsx)(ea.A,{className:"mr-2 h-4 w-4 ".concat(a===e.code?"opacity-100":"opacity-0")}),e.name]},e.code)),(0,r.jsxs)(er,{onSelect:()=>{d(!0),i(!1)},children:[(0,r.jsx)(P.A,{className:"mr-2 h-4 w-4"}),"Add Language"]})]})]})]})})]}),(0,r.jsx)(y,{open:c,onOpenChange:d,children:(0,r.jsxs)(C,{children:[(0,r.jsx)(k,{children:(0,r.jsx)(E,{children:"Add New Language"})}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(g,{htmlFor:"code",className:"text-right",children:"Code"}),(0,r.jsx)(u,{id:"code",value:m,onChange:e=>f(e.target.value),placeholder:"en",className:"col-span-3"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(g,{htmlFor:"name",className:"text-right",children:"Name"}),(0,r.jsx)(u,{id:"name",value:x,onChange:e=>p(e.target.value),placeholder:"English",className:"col-span-3"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(h,{onClick:()=>{d(!1),f(""),p("")},children:"Add Language"})})]})})]})}let es=[{code:"en",name:"English"},{code:"ru",name:"Russian"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese"},{code:"cs",name:"Czech"}],ei={orientation:"portrait",backgroundColor:"#007AFF",titleColor:"#FFFFFF",descriptionColor:"#FFFFFF",fontFamily:"SF Pro"},ec=[{value:"top-left",label:"Top Left"},{value:"top-center",label:"Top Center"},{value:"top-right",label:"Top Right"},{value:"center-left",label:"Center Left"},{value:"center",label:"Center"},{value:"center-right",label:"Center Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-center",label:"Bottom Center"},{value:"bottom-right",label:"Bottom Right"}];function ed(e){let{color:t,onChange:o}=e,[a,l]=(0,n.useState)(t),s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{l(t)},[t]),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(q,{children:[(0,r.jsx)(G,{asChild:!0,children:(0,r.jsx)("button",{className:"w-10 h-10 rounded-md border border-input",style:{backgroundColor:t},"aria-label":"Pick a color"})}),(0,r.jsx)(V,{className:"w-64",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3","#FF1493","#FF69B4","#FFC0CB","#FFFFFF","#000000","#808080","#A52A2A","#D2691E","#FFD700","#008000","#00FFFF"].map(e=>(0,r.jsx)("button",{className:"w-8 h-8 rounded-md border border-input",style:{backgroundColor:e},onClick:()=>{o(e),l(e)},"aria-label":"Select color ".concat(e)},e))}),(0,r.jsx)("input",{ref:s,type:"color",value:a,onChange:e=>{l(e.target.value),o(e.target.value)},className:"w-full h-10"})]})})]}),(0,r.jsx)(u,{value:a,onChange:e=>{let t=e.target.value;l(t),/^#[0-9A-F]{6}$/i.test(t)&&o(t)},className:"w-28",placeholder:"#RRGGBB"})]})}var eh=o(78),eu=o.n(eh);let em=(e,t)=>{var o,r,n,a;return(console.log("getCurrentScreenshot: Looking for screenshot for preview ".concat(e.id,", language ").concat(t)),null===(r=e.localizedScreenshots)||void 0===r?void 0:null===(o=r[t])||void 0===o?void 0:o.file)?(console.log("✓ Found localized screenshot for ".concat(t)),e.localizedScreenshots[t]):(null===(a=e.localizedScreenshots)||void 0===a?void 0:null===(n=a.en)||void 0===n?void 0:n.file)?(console.log("⚠️ No screenshot for ".concat(t,", using English fallback")),e.localizedScreenshots.en):(console.log("⚠️ No localized screenshots, using default screenshot"),e.screenshot)};class ef{initDB(){return new Promise((e,t)=>{if(!window.indexedDB){console.error("Ваш браузер не поддерживает IndexedDB"),t("IndexedDB не поддерживается");return}let o=window.indexedDB.open(this.dbName,this.version);o.onerror=e=>{console.error("Ошибка при открытии базы данных",e),t("Ошибка при открытии базы данных")},o.onsuccess=t=>{this.db=t.target.result,e()},o.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})}})}async saveImage(e,t){return this.db||await this.initDB(),new Promise((o,r)=>{try{let n=new FileReader;n.onload=()=>{try{let a=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),l={id:e,data:n.result,type:t.type,lastModified:new Date().getTime()},s=a.put(l);s.onsuccess=()=>o(),s.onerror=e=>{console.error("Error putting data in IndexedDB:",e),r(e)}}catch(e){console.error("Catch error in transaction:",e),r(e)}},n.onerror=e=>r(e),n.readAsDataURL(t)}catch(e){console.error("Outer catch error:",e),r(e)}})}async getImage(e){return this.db||await this.initDB(),new Promise((t,o)=>{try{let r=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);r.onsuccess=()=>{let o=r.result;if(!o){console.log("No image found in IndexedDB for id: ".concat(e)),t(null);return}try{var n;let r=o.data;console.log("Found image data for ".concat(e,", type: ").concat(o.type,", data length: ").concat(r.length));let a=r.split(",");if(2!==a.length||!a[0].startsWith("data:")){console.error("Invalid data URL format for ".concat(e,":"),r.substring(0,100)),t(null);return}let l=(null===(n=a[0].match(/:(.*?);/))||void 0===n?void 0:n[1])||o.type,s=atob(a[1]),i=s.length,c=new Uint8Array(i);for(;i--;)c[i]=s.charCodeAt(i);let d=new Blob([c],{type:l}),h=new File([d],"preview_".concat(e,".").concat(l.split("/")[1]),{type:l,lastModified:o.lastModified});console.log("Successfully reconstructed File for ".concat(e,":"),h.name,h.size,"bytes"),t(h)}catch(o){console.error("Error reconstructing File for ".concat(e,":"),o),t(null)}},r.onerror=t=>{console.error("IndexedDB get error for ".concat(e,":"),t),o(t)}}catch(t){console.error("Outer catch error in getImage for ".concat(e,":"),t),o(t)}})}async deleteImage(e){return this.db||await this.initDB(),new Promise((t,o)=>{try{let r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);r.onsuccess=()=>t(),r.onerror=e=>o(e)}catch(e){o(e)}})}async clearAll(){return this.db||await this.initDB(),new Promise((e,t)=>{try{let o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();o.onsuccess=()=>e(),o.onerror=e=>t(e)}catch(e){t(e)}})}constructor(){this.db=null,this.dbName="bannerGeneratorDB",this.storeName="screenshots",this.version=1,this.initDB()}}let eg=e=>{let{value:t,onChange:o,min:n,max:a,step:l=1,unit:s,className:i=""}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2 ".concat(i),children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(v,{value:[t],min:n,max:a,step:l,onValueChange:e=>{let[t]=e;return o(t)},className:"w-full"})}),(0,r.jsxs)("div",{className:"flex items-center gap-1 min-w-[90px]",children:[(0,r.jsx)(u,{type:"number",value:t,onChange:e=>{let t=Number(e.target.value);isNaN(t)||o(Math.min(Math.max(t,n),a))},className:"w-[60px] h-6 px-2 text-[10px] font-mono",min:n,max:a,step:l}),s&&(0,r.jsx)("span",{className:"text-[10px] font-mono text-gray-500",children:s})]})]})};function ex(){let[e,t]=(0,n.useState)("ru"),[o,a]=(0,n.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("bannerSettings");if(e)return JSON.parse(e)}catch(e){console.error("Error loading initial banner settings:",e)}return ei}),[l,s]=(0,n.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("localizedContent");if(e)return JSON.parse(e)}catch(e){console.error("Error loading initial localized content:",e)}return{ru:{title:"Новое приложение",description:"Описание приложения",promotionalText:"Рекламный текст",whatsNew:"Что нового в этой версии",keywords:"приложение, ключевые, слова"}}}),[i,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)(""),[f,p]=(0,n.useState)(0),[v,b]=(0,n.useState)(0),[w,N]=(0,n.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("textAlignment");if(e)return console.log("Loaded initial text alignment from localStorage:",e),e}catch(e){console.error("Error loading initial text alignment:",e)}return"center"}),[S,W]=(0,n.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("fontSize");if(e)return console.log("Loaded initial font size from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial font size:",e)}return{title:24,description:16}}),[U,H]=(0,n.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("lineHeight");if(e)return console.log("Loaded initial line height from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial line height:",e)}return{title:"auto",description:"auto"}}),[q,G]=(0,n.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("letterSpacing");if(e)return console.log("Loaded initial letter spacing from localStorage"),JSON.parse(e)}catch(e){console.error("Error loading initial letter spacing:",e)}return{title:0,description:0}});(0,n.useRef)(null);let V=(0,n.useRef)(null),[K,Q]=(0,n.useState)("banner"),[Z,$]=(0,n.useState)(null),ee=(0,n.useRef)(null),[et,eo]=(0,n.useState)(0),er=()=>eo(e=>e+1);(0,n.useEffect)(()=>(ee.current||(ee.current=new ef,ee.current.initDB().catch(e=>console.error("Ошибка при инициализации IndexedDB:",e))),()=>{}),[]);let[en,ea]=(0,n.useState)(()=>{if(window.localStorage)try{let e=localStorage.getItem("previewItems");if(e){let t=JSON.parse(e);if(console.log("Loaded initial preview items from localStorage",t),Array.isArray(t)&&t.length>0)return t}}catch(e){console.error("Error loading initial preview items:",e)}return[{id:1,name:"Preview 1",backgroundColor:"#FFD700",devicePosition:"center",deviceScale:100,rotation:{device:0,title:0,description:0,textBlock:0},verticalOffset:{combined:0,title:0,description:0,device:0},horizontalOffset:{combined:0,title:0,description:0},screenshot:{file:null,borderColor:"#000000",borderWidth:8,borderRadius:30}}]});(0,n.useEffect)(()=>{if(window.localStorage){console.log("Checking for additional data in localStorage");try{let e=localStorage.getItem("localizedContent");if(e){let t=JSON.parse(e);s(t)}let t=localStorage.getItem("textAlignment");t&&N(t);let o=localStorage.getItem("fontSize");o&&W(JSON.parse(o));let r=localStorage.getItem("lineHeight");r&&H(JSON.parse(r));let n=localStorage.getItem("letterSpacing");n&&G(JSON.parse(n))}catch(e){console.error("Error loading additional data from localStorage:",e)}}},[]),(0,n.useEffect)(()=>{if(window.localStorage&&en)try{console.log("Saving previewItems to localStorage",en.length);let e=en.map(e=>({...e,screenshot:{...e.screenshot,file:null}}));localStorage.setItem("previewItems",JSON.stringify(e))}catch(e){console.error("Error saving preview items:",e)}},[en]),(0,n.useEffect)(()=>{console.log("Initializing IndexedDB and loading images"),ee.current||(ee.current=new ef);let e=async()=>{if(console.log("Loading images from IndexedDB..."),ee.current)try{let e=[...en],t=!1;for(let o=0;o<en.length;o++){let r=en[o],n="preview_".concat(r.id);try{let r=await ee.current.getImage(n);r&&(console.log("Loaded default image for preview ".concat(n)),e[o]={...e[o],screenshot:{...e[o].screenshot,file:r}},t=!0)}catch(e){console.error("Error loading default image for ".concat(n,":"),e)}for(let n of(e[o].localizedScreenshots||(e[o].localizedScreenshots={}),es)){let a="preview_".concat(r.id,"_").concat(n.code);try{let l=await ee.current.getImage(a);l&&(console.log("Loaded localized image for ".concat(a)),e[o].localizedScreenshots[n.code]={file:l,borderColor:r.screenshot.borderColor,borderWidth:r.screenshot.borderWidth,borderRadius:r.screenshot.borderRadius},t=!0)}catch(e){console.error("Error loading localized image for ".concat(a,":"),e)}}}t&&ea(e)}catch(e){console.error("Error loading images from IndexedDB:",e)}};en.length>0&&e()},[en.length]),(0,n.useEffect)(()=>{let t=setTimeout(async()=>{if(!ee.current||0===en.length){console.log("Skipping image loading: imageDB=".concat(!!ee.current,", previewItems=").concat(en.length));return}console.log("\uD83D\uDD04 Loading images for language: ".concat(e));let t=[...en],o=!1;for(let r=0;r<en.length;r++){let n=en[r];console.log("Checking preview ".concat(n.id," for language ").concat(e)),t[r].localizedScreenshots||(t[r].localizedScreenshots={},console.log("Initialized localizedScreenshots for preview ".concat(n.id)));let a=t[r].localizedScreenshots[e];if(null==a?void 0:a.file){console.log("✓ Preview ".concat(n.id," already has screenshot for ").concat(e));continue}let l="preview_".concat(n.id,"_").concat(e);console.log("Attempting to load image: ".concat(l));try{let a=await ee.current.getImage(l);a?(console.log("✅ Loaded localized image for ".concat(l,", size: ").concat(a.size," bytes")),t[r].localizedScreenshots[e]={file:a,borderColor:n.screenshot.borderColor,borderWidth:n.screenshot.borderWidth,borderRadius:n.screenshot.borderRadius},o=!0):console.log("❌ No image found for ".concat(l))}catch(e){console.error("\uD83D\uDCA5 Error loading localized image for ".concat(l,":"),e)}}o?(console.log("\uD83D\uDD04 Updating state with new images for ".concat(e)),ea(t),er()):console.log("ℹ️ No new images loaded for ".concat(e))},200);return()=>clearTimeout(t)},[e,en.length]),(0,n.useEffect)(()=>{if(window.localStorage&&l)try{localStorage.setItem("localizedContent",JSON.stringify(l))}catch(e){console.error("Error saving localized content:",e)}},[l]),(0,n.useEffect)(()=>{if(window.localStorage&&o)try{localStorage.setItem("bannerSettings",JSON.stringify(o))}catch(e){console.error("Error saving banner settings:",e)}},[o]),(0,n.useEffect)(()=>{if(window.localStorage&&w)try{localStorage.setItem("textAlignment",w)}catch(e){console.error("Error saving text alignment:",e)}},[w]),(0,n.useEffect)(()=>{if(window.localStorage&&S)try{localStorage.setItem("fontSize",JSON.stringify(S))}catch(e){console.error("Error saving font size:",e)}},[S]),(0,n.useEffect)(()=>{if(window.localStorage&&U)try{localStorage.setItem("lineHeight",JSON.stringify(U))}catch(e){console.error("Error saving line height:",e)}},[U]),(0,n.useEffect)(()=>{if(window.localStorage&&q)try{localStorage.setItem("letterSpacing",JSON.stringify(q))}catch(e){console.error("Error saving letter spacing:",e)}},[q]);let eh=(e,t,o)=>{let r={...l};r[e]||(r[e]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),r[e][t]=o,s(r)},ex=(e,t)=>{var o;return l[e]&&(null===(o=l[e])||void 0===o?void 0:o[t])||""},ep=(e,t,o)=>{var r;if(!l[e])return"";let n="preview_".concat(t,"_").concat(o);return(null===(r=l[e])||void 0===r?void 0:r[n])||""},ev=async function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;try{console.log("\uD83D\uDCE4 handleScreenshotUpload: Starting upload for preview ".concat(v,", language ").concat(o,", file size: ").concat(t.size," bytes"));let e=[...en];if(e[v]){let r=e[v];if(console.log("\uD83D\uDCE4 Processing preview ".concat(r.id)),r.localizedScreenshots||(r.localizedScreenshots={},console.log("\uD83D\uDCE4 Initialized localizedScreenshots for preview ".concat(r.id))),r.localizedScreenshots[o]={file:t,borderColor:r.screenshot.borderColor,borderWidth:r.screenshot.borderWidth,borderRadius:r.screenshot.borderRadius},console.log("\uD83D\uDCE4 Set localized screenshot for ".concat(o," in state")),ea(e),console.log("\uD83D\uDCE4 Updated React state"),er(),console.log("\uD83D\uDCE4 Forced UI update"),ee.current){let e="preview_".concat(r.id,"_").concat(o);console.log("\uD83D\uDCBE Saving to IndexedDB: ".concat(e)),await ee.current.saveImage(e,t),console.log("✅ Successfully saved image for ".concat(o,": ").concat(e))}console.log("\uD83C\uDF89 Upload complete, position should still be:",r.devicePosition)}else console.error("❌ Preview ".concat(v," not found in previewItems"))}catch(e){console.error("\uD83D\uDCA5 Error in handleScreenshotUpload:",e)}},eb=e=>{let t=en.find(t=>t.id===e);if(!t)return;let o=en.length>0?Math.max(...en.map(e=>e.id))+1:1;ea([...en,{...t,id:o,name:"Preview ".concat(o),screenshot:{...t.screenshot,file:t.screenshot.file?t.screenshot.file:null}}]);let r={...l};Object.keys(r).forEach(t=>{let n="preview_".concat(o,"_title"),a="preview_".concat(o,"_description");r[t]&&(r[t][n]=r[t]["preview_".concat(e,"_title")]||r[t].title||"",r[t][a]=r[t]["preview_".concat(e,"_description")]||r[t].description||"")}),s(r),b(en.length),setTimeout(()=>{V.current&&(V.current.scrollLeft=V.current.scrollWidth)},100)},ew=e=>{if(en.length<=1)return;ee.current&&ee.current.deleteImage("preview_".concat(e)).catch(e=>console.error("Error deleting image from IndexedDB:",e));let t=en.filter(t=>t.id!==e);ea(t),v>=t.length&&b(t.length-1)},ey=(e,t)=>{let o=[...en];o[v]&&(o[v]={...o[v],screenshot:{...o[v].screenshot,[e]:t}},ea(o))},ej=e=>{var t,o;if(!e)return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"220px"};let r=e.devicePosition||"center",n=e.deviceScale||100,a=(null===(t=e.verticalOffset)||void 0===t?void 0:t.device)||0,l=(null===(o=e.rotation)||void 0===o?void 0:o.device)||0,s={position:"absolute",width:"".concat(220*n/100,"px")};switch(r){case"top-left":s={...s,top:"-35%",left:"-15%",transform:"translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;case"top-center":s={...s,top:"-35%",left:"50%",transform:"translateX(-50%) translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;case"top-right":s={...s,top:"-35%",right:"-15%",transform:"translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;case"center-left":s={...s,top:"50%",left:"-25%",transform:"translateY(-50%) translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;case"center":s={...s,top:"50%",left:"50%",transform:"translate(-50%, -50%) translateY(".concat(a,"px) rotate(").concat(l,"deg)"),zIndex:"10",maxWidth:"75%",margin:"0 auto"};break;case"center-right":s={...s,top:"50%",right:"-25%",transform:"translateY(-50%) translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;case"bottom-left":s={...s,bottom:"-35%",left:"-15%",transform:"translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;case"bottom-center":s={...s,bottom:"-35%",left:"50%",transform:"translateX(-50%) translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;case"bottom-right":s={...s,bottom:"-35%",right:"-15%",transform:"translateY(".concat(a,"px) rotate(").concat(l,"deg)")};break;default:s={...s,top:"50%",left:"50%",transform:"translate(-50%, -50%) translateY(".concat(a,"px) rotate(").concat(l,"deg)")}}return s},eN=e=>{if("center"===e)return{titlePosition:{top:"8%",left:"50%",transform:"translateX(-50%)",width:"250px",textAlign:"center",zIndex:"5"},descriptionPosition:{bottom:"15%",left:"50%",transform:"translateX(-50%)",width:"250px",textAlign:"center",zIndex:"5"},separateElements:!0};if(e.startsWith("top"))return{titlePosition:{bottom:"15%",left:"50%",transform:"translateX(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1};if(e.startsWith("bottom"));else if(e.endsWith("left"))return{titlePosition:{top:"50%",right:"15%",transform:"translateY(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1};else if(e.endsWith("right"))return{titlePosition:{top:"50%",left:"15%",transform:"translateY(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1};return{titlePosition:{top:"15%",left:"50%",transform:"translateX(-50%)",width:"250px"},descriptionPosition:{},separateElements:!1}},eS=async e=>{if(e.target.files&&e.target.files[0])try{let t=e.target.files[0],o=await t.text(),r=JSON.parse(o);if(!r.global||!r.banners)throw Error("Неверный формат JSON: отсутствуют разделы global или banners");let n={};Object.entries(r.global).forEach(e=>{let[t,o]=e;n[t]||(n[t]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),n[t]={...n[t],title:o.title||"",description:o.description||"",promotionalText:o.promotionalText||"",whatsNew:o.whatsNew||"",keywords:o.keywords||""}}),Object.entries(r.banners).forEach(e=>{let[t,o]=e;n[t]||(n[t]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),Object.entries(o).forEach(e=>{let[o,r]=e;n[t]["".concat(o,"_title")]=r.title||"",n[t]["".concat(o,"_description")]=r.description||""})}),s(n),e.target.value="",alert("JSON успешно импортирован!")}catch(e){console.error("Ошибка при импорте JSON:",e),alert("Ошибка при импорте JSON. Проверьте формат файла.")}};(0,n.useEffect)(()=>{let t=e=>{document.querySelectorAll(".banner-device-target").forEach(t=>{e?t.classList.add("drag-highlight"):t.classList.remove("drag-highlight")})},o=e=>{e.preventDefault(),e.stopPropagation(),t(!0)},r=e=>{e.relatedTarget||t(!1)},n=o=>{var r;if(o.preventDefault(),o.stopPropagation(),console.log("\uD83C\uDFAF handleDrop: Drop event detected"),t(!1),!(null===(r=o.dataTransfer)||void 0===r?void 0:r.files)||!o.dataTransfer.files[0]){console.log("❌ handleDrop: No files in drop event");return}let n=o.dataTransfer.files[0];console.log("\uD83D\uDCC4 handleDrop: Processing file: ".concat(n.name,", size: ").concat(n.size," bytes, current language: ").concat(e));let s=a(o);if(console.log("\uD83C\uDFAF handleDrop: Target element found:",s?"banner-".concat(s.dataset.bannerId):"none"),s){let e=parseInt(s.dataset.bannerId||"-1");if(console.log("\uD83C\uDFAF handleDrop: Target banner ID: ".concat(e)),e>=0){console.log("\uD83D\uDD04 handleDrop: Setting preview index to ".concat(e)),b(e),console.log("\uD83D\uDCE4 handleDrop: Calling uploadScreenshotToBanner for banner ".concat(e)),l(n,e);return}}console.log("\uD83D\uDCE4 handleDrop: No specific target, calling handleScreenshotUpload for current preview ".concat(v)),ev(n)},a=e=>{let t=document.querySelectorAll(".banner-device-target");for(let o of(console.log("\uD83D\uDD0D findDropTarget: Found ".concat(t.length," drop targets, mouse at (").concat(e.clientX,", ").concat(e.clientY,")")),t)){let t=o.getBoundingClientRect(),r=o.dataset.bannerId;if(console.log("\uD83D\uDD0D findDropTarget: Checking banner-".concat(r,": rect(").concat(t.left,", ").concat(t.top,", ").concat(t.right,", ").concat(t.bottom,")")),e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=t.top&&e.clientY<=t.bottom)return console.log("✅ findDropTarget: Found matching target: banner-".concat(r)),o}return console.log("❌ findDropTarget: No matching target found"),null},l=async(t,o)=>{try{console.log("\uD83D\uDCE4 uploadScreenshotToBanner: Starting upload to banner ".concat(o,", language ").concat(e,", file size: ").concat(t.size," bytes"));let r=[...en];if(r[o]){let n=r[o];if(console.log("\uD83D\uDCE4 uploadScreenshotToBanner: Processing banner ".concat(n.id)),n.localizedScreenshots||(n.localizedScreenshots={},console.log("\uD83D\uDCE4 uploadScreenshotToBanner: Initialized localizedScreenshots for banner ".concat(n.id))),n.localizedScreenshots[e]={file:t,borderColor:n.screenshot.borderColor,borderWidth:n.screenshot.borderWidth,borderRadius:n.screenshot.borderRadius},console.log("\uD83D\uDCE4 uploadScreenshotToBanner: Set localized screenshot for ".concat(e," in state")),ea(r),console.log("\uD83D\uDCE4 uploadScreenshotToBanner: Updated React state"),er(),console.log("\uD83D\uDCE4 uploadScreenshotToBanner: Forced UI update"),ee.current){let r="preview_".concat(n.id,"_").concat(e);console.log("\uD83D\uDCBE uploadScreenshotToBanner: Saving to IndexedDB: ".concat(r)),await ee.current.saveImage(r,t),console.log("✅ uploadScreenshotToBanner: Successfully saved image for banner ".concat(o,": ").concat(r))}}else console.error("❌ uploadScreenshotToBanner: Banner ".concat(o," not found in previewItems"))}catch(e){console.error("\uD83D\uDCA5 Error in uploadScreenshotToBanner:",e)}};return window.addEventListener("dragover",o),window.addEventListener("dragleave",r),window.addEventListener("drop",n),()=>{window.removeEventListener("dragover",o),window.removeEventListener("dragleave",r),window.removeEventListener("drop",n)}},[v,en]);let[eC,ek]=(0,n.useState)(()=>es.reduce((e,t)=>(e[t.code]=!0,e),{})),eD=e=>{ek(t=>({...t,[e]:!t[e]}))},eE=e=>{let t={};es.forEach(o=>{t[o.code]=e}),ek(t)},ez=async()=>{c(!0),p(0);try{console.log("Начинаем процесс экспорта..."),ee.current||(console.log("Инициализируем IndexedDB..."),ee.current=new ef,await new Promise(e=>setTimeout(e,500)));let o=new(J()),r=Object.keys(eC).filter(e=>eC[e]);if(0===r.length){alert("Пожалуйста, выберите хотя бы один язык для экспорта"),c(!1);return}console.log("Выбранные языки для экспорта:",r);let n=en.length*r.length,a=0;for(let e of r){let r=o.folder(e);if(r)for(let o=0;o<en.length;o++)try{t(e),b(o),await new Promise(e=>setTimeout(e,100));let l=en[o];console.log("Экспорт баннера #".concat(l.id," для языка ").concat(e));let s=document.getElementById("preview-".concat(l.id));if(!s){console.error("Не найден элемент с ID preview-".concat(l.id));continue}let i=s.cloneNode(!0);document.body.appendChild(i);try{i.querySelectorAll(".banner-controls, .banner-edit-icons, button").forEach(e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)}),i.querySelectorAll('[class*="hover:"]').forEach(e=>{let t=e.className.split(" ").filter(e=>!e.includes("hover:"));e.className=t.join(" ")}),i.querySelectorAll(".banner-content").forEach(e=>{e instanceof HTMLElement&&e.classList.remove("border","border-blue-500","shadow-xl")}),i.style.position="absolute",i.style.left="-9999px",i.style.top="0",i.style.zIndex="-1",i.style.transform="none",i.style.margin="0",i.style.padding="0",i.style.borderRadius="0",i.style.width="321px",i.style.height="694.5px",i.style.boxSizing="border-box";let e=i.querySelector(".banner-device-target"),t=i.querySelector(".banner-text-container"),o="",s="";e instanceof HTMLElement&&(o=e.style.transform),t instanceof HTMLElement&&(s=t.style.transform);let c=await eu()(i,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:l.backgroundColor||"#ffffff",width:321,height:694.5,logging:!1,removeContainer:!1,onclone:(e,t)=>{let r=e.querySelector(".banner-device-target"),n=e.querySelector(".banner-text-container");return r instanceof HTMLElement&&o&&(r.style.transform=o),n instanceof HTMLElement&&s&&(n.style.transform=s),t}}),d=document.createElement("canvas");d.width=1284,d.height=2778;let h=d.getContext("2d");h&&h.drawImage(c,0,0,1284,2778);let u=await new Promise((e,t)=>{d.toBlob(o=>{o?e(o):t(Error("Failed to create blob"))},"image/png",1)});r.file("banner_".concat(l.id,".png"),u),a++,p(Math.floor(a/n*100))}finally{i.parentNode&&document.body.removeChild(i)}}catch(e){console.error("Ошибка при экспорте баннера ".concat(en[o].id,":"),e)}}t(e),b(v),console.log("Генерация архива...");let l=await o.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}});console.log("Размер архива: ".concat(l.size," байт")),(0,_.saveAs)(l,"app_banners.zip"),console.log("Экспорт завершен успешно!")}catch(e){console.error("Ошибка при экспорте:",e),alert("Произошла ошибка при экспорте. Пожалуйста, попробуйте снова.")}finally{c(!1),p(0)}},eF=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{color:"title"===e?o.titleColor:o.descriptionColor,fontFamily:o.fontFamily,textAlign:w,fontSize:"".concat("title"===e?S.title:S.description,"px"),lineHeight:"title"===e?U.title:U.description,letterSpacing:"".concat("title"===e?q.title:q.description,"%"),transform:t?"rotate(".concat(t,"deg)"):void 0,transformOrigin:"center",display:"inline-block",width:"100%"}},[eO,eB]=(0,n.useState)(null),eI=(e,t,o)=>{eB({type:e,value:o,bannerId:t}),eR.current&&eL(eR.current)},eT=()=>{eO&&(eP(e,eO.bannerId,eO.type,eO.value),eB(null))},eR=(0,n.useRef)(null),eL=e=>{e&&(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"))};(0,n.useEffect)(()=>{eO&&eR.current&&eL(eR.current)},[eO]);let eA=(t,o)=>{let n=o===v,a=t.devicePosition||"center";console.log("Rendering banner ".concat(o,", device position:"),a);let{titlePosition:l,descriptionPosition:s,separateElements:i}=eN(a),c=t.verticalOffset||{combined:0,title:0,description:0,device:0},d=t.horizontalOffset||{combined:0,title:0,description:0},u=t.rotation||{device:0,title:0,description:0,textBlock:0},m=function(e,o,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=eO&&eO.type===e&&eO.bannerId===t.id,i={...l,width:"calc(100% + 30px)",display:"flex",flexDirection:"column",alignItems:"center"===w?"center":"right"===w?"flex-end":"flex-start",justifyContent:"flex-start"},c={...a,textAlign:w,width:"100%"};return s?(0,r.jsx)("div",{style:i,children:(0,r.jsx)("textarea",{ref:eR,className:"w-full bg-transparent outline-none resize-none p-1",value:eO.value,onChange:e=>{eB({...eO,value:e.target.value}),eL(e.target)},onBlur:eT,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eT())},autoFocus:!0,style:{...c,height:"auto",minHeight:"title"===e?"2.5rem":"3.5rem",display:"block",overflow:"hidden",border:"none",background:"rgba(59, 130, 246, 0.05)",verticalAlign:"top"}})}):(0,r.jsx)("div",{className:"cursor-text w-full",onClick:()=>{n&&eI(e,t.id,o)},style:i,children:"title"===e?(0,r.jsx)("h2",{className:"text-2xl font-bold text-".concat(w),style:c,children:o||"Title"}):(0,r.jsx)("p",{className:"text-base text-".concat(w),style:c,children:o||"Description"})})};return(0,r.jsx)("div",{id:"preview-".concat(t.id),className:"relative rounded-lg pb-4 overflow-hidden banner border ".concat(n?"shadow-xl border-transparent":"border-transparent"),onClick:()=>b(o),style:{backgroundColor:t.backgroundColor||"#007AFF",width:"320px",height:"690px",position:"relative",margin:"0 15px"},children:(0,r.jsxs)("div",{className:"w-full h-full relative",style:{backgroundColor:t.backgroundColor},children:[(0,r.jsx)("div",{className:"absolute top-4 left-4 text-white text-xl font-mono opacity-50",children:String(t.id).padStart(2,"0")}),i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute ".concat(n?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50 rounded-md p-1":""," ").concat(n&&(null==Z?void 0:Z.elementType)!=="title"?"cursor-grab":""," ").concat((null==Z?void 0:Z.elementType)==="title"?"cursor-grabbing":""),style:{...l,transform:"".concat(l.transform||""," translateY(").concat(c.title,"px) translateX(").concat(d.title,"px)")},onMouseDown:e=>n&&eJ(e,t.id,"title"),onDoubleClick:e=>{n&&(e.stopPropagation(),Q("title"))},children:m("title",ep(e,t.id,"title"),eF("title",u.title))}),(0,r.jsx)("div",{className:"absolute ".concat(n?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50 rounded-md p-1":""," ").concat(n&&(null==Z?void 0:Z.elementType)!=="description"?"cursor-grab":""," ").concat((null==Z?void 0:Z.elementType)==="description"?"cursor-grabbing":""),style:{...s,transform:"".concat(s.transform||""," translateY(").concat(c.description,"px) translateX(").concat(d.description,"px)")},onMouseDown:e=>n&&eJ(e,t.id,"description"),onDoubleClick:e=>{n&&(e.stopPropagation(),Q("description"))},children:m("description",ep(e,t.id,"description"),eF("description",u.description))})]}):(0,r.jsxs)("div",{className:"absolute ".concat(n?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50 rounded-md p-1":""," ").concat(n&&(null==Z?void 0:Z.elementType)!=="text-block"?"cursor-grab":""," ").concat((null==Z?void 0:Z.elementType)==="text-block"?"cursor-grabbing":""),style:{...l,transform:"".concat(l.transform||""," translateY(").concat(c.combined,"px) translateX(").concat(d.combined,"px) rotate(").concat(u.textBlock,"deg)")},onMouseDown:e=>n&&eJ(e,t.id,"text-block"),onDoubleClick:e=>{n&&(e.stopPropagation(),Q("text-block"))},children:[m("title",ep(e,t.id,"title"),eF("title"),{marginBottom:"0.5rem"}),m("description",ep(e,t.id,"description"),eF("description"))]}),(0,r.jsx)("div",{className:"absolute banner-device-target ".concat(n?"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50":""," ").concat(n&&(null==Z?void 0:Z.elementType)!=="device"?"cursor-grab":""," ").concat((null==Z?void 0:Z.elementType)==="device"?"cursor-grabbing":""),"data-banner-id":o,style:ej(t),onMouseDown:e=>n&&eJ(e,t.id,"device"),onDoubleClick:e=>{n&&(e.stopPropagation(),Q("device"))},children:(()=>{var o,a,l;let s=em(t,e);return s&&s.file&&s.file instanceof File?(0,r.jsx)("div",{style:{borderWidth:"".concat(s.borderWidth,"px"),borderStyle:"solid",borderColor:s.borderColor,borderRadius:"".concat(s.borderRadius,"px"),overflow:"hidden"},children:(0,r.jsx)("img",{src:s.file&&s.file instanceof File?URL.createObjectURL(s.file):"/placeholder.svg",alt:"Screenshot ".concat(t.id),style:{width:"100%",display:"block"}},"screenshot-".concat(t.id,"-").concat(e,"-").concat(et))}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",style:{width:"100%",height:"400px",borderWidth:"".concat((null===(o=t.screenshot)||void 0===o?void 0:o.borderWidth)||8,"px"),borderStyle:"solid",borderColor:(null===(a=t.screenshot)||void 0===a?void 0:a.borderColor)||"#000000",borderRadius:"".concat((null===(l=t.screenshot)||void 0===l?void 0:l.borderRadius)||30,"px")},children:[n&&(0,r.jsx)("input",{type:"file",id:"screenshot-upload-".concat(t.id),className:"hidden",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&ev(e.target.files[0])}}),n?(0,r.jsxs)("label",{htmlFor:"screenshot-upload-".concat(t.id),className:"cursor-pointer flex flex-col items-center",children:[(0,r.jsx)(O.A,{className:"h-12 w-12 text-gray-400"}),(0,r.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"Click or drag & drop to upload screenshot"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.A,{className:"h-12 w-12 text-gray-400"}),(0,r.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"No screenshot"})]})]})})()}),n&&(0,r.jsxs)("div",{className:"absolute top-4 right-4 flex gap-1",children:[(0,r.jsx)(h,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-black bg-opacity-30 hover:bg-opacity-50 text-white rounded-full",onClick:e=>{e.stopPropagation(),eb(t.id)},children:(0,r.jsx)(B.A,{className:"h-4 w-4"})}),en.length>1&&(0,r.jsx)(h,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-black bg-opacity-30 hover:bg-opacity-50 text-white rounded-full",onClick:e=>{e.stopPropagation(),ew(t.id)},children:(0,r.jsx)(I.A,{className:"h-4 w-4"})})]})]})},"banner-".concat(t.id))};(0,n.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n      .drag-highlight {\n        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5), 0 0 0 6px rgba(59, 130, 246, 0.3);\n        transition: box-shadow 0.2s ease-in-out;\n      }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,n.useEffect)(()=>{if(console.log("Loading banner settings from localStorage"),window.localStorage)try{let e=localStorage.getItem("bannerSettings");if(e){let t=JSON.parse(e);a(t)}}catch(e){console.error("Error parsing banner settings:",e)}},[]),(0,n.useEffect)(()=>{if(console.log("Loading text alignment from localStorage"),window.localStorage)try{let e=localStorage.getItem("textAlignment");e&&N(e)}catch(e){console.error("Error loading text alignment:",e)}},[]),(0,n.useEffect)(()=>{if(console.log("Loading font size from localStorage"),window.localStorage)try{let e=localStorage.getItem("fontSize");e&&W(JSON.parse(e))}catch(e){console.error("Error parsing font size:",e)}},[]),(0,n.useEffect)(()=>{if(console.log("Loading line height and letter spacing from localStorage"),window.localStorage)try{let e=localStorage.getItem("lineHeight");e&&H(JSON.parse(e));let t=localStorage.getItem("letterSpacing");t&&G(JSON.parse(t))}catch(e){console.error("Error parsing line height or letter spacing:",e)}},[]);let eP=(e,t,o,r)=>{console.log("Updating banner text: ".concat(e,", id=").concat(t,", ").concat(o,"=").concat(r));let n={...l};n[e]||(n[e]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""});let a="preview_".concat(t,"_").concat(o);n[e][a]=r,s(n)},[e_,eW]=(0,n.useState)(!1);(0,n.useEffect)(()=>{eW(!0)},[]);let eJ=(e,t,o)=>{e.preventDefault(),e.stopPropagation();let r=en.find(e=>e.id===t);if(!r)return;let n=0,a=0,l=r.verticalOffset||{combined:0,title:0,description:0,device:0},s=r.horizontalOffset||{combined:0,title:0,description:0};"title"===o?(n=s.title,a=l.title):"description"===o?(n=s.description,a=l.description):"device"===o?(n=0,a=l.device):"text-block"===o&&(n=s.combined,a=l.combined),("title"===o||"description"===o||"device"===o||"text-block"===o)&&Q("text-block"===o?"title":o),$({bannerId:t,elementType:o,initialMouseX:e.clientX,initialMouseY:e.clientY,initialElementOffsetX:n,initialElementOffsetY:a})},eY=(0,n.useCallback)(e=>{if(!Z)return;let t=e.clientX-Z.initialMouseX,o=e.clientY-Z.initialMouseY,r=Z.initialElementOffsetX+t,n=Z.initialElementOffsetY+o;ea(e=>e.map(e=>{if(e.id===Z.bannerId){let t={...e},o=Z.elementType;return"title"===o?(t.horizontalOffset={...e.horizontalOffset,title:r},t.verticalOffset={...e.verticalOffset,title:n}):"description"===o?(t.horizontalOffset={...e.horizontalOffset,description:r},t.verticalOffset={...e.verticalOffset,description:n}):"device"===o?t.verticalOffset={...e.verticalOffset,device:n}:"text-block"===o&&(t.horizontalOffset={...e.horizontalOffset,combined:r},t.verticalOffset={...e.verticalOffset,combined:n}),t}return e}))},[Z,ea]),eM=(0,n.useCallback)(()=>{Z&&$(null)},[Z]);return(0,n.useEffect)(()=>(Z?(window.addEventListener("mousemove",eY),window.addEventListener("mouseup",eM),document.body.style.userSelect="none"):(window.removeEventListener("mousemove",eY),window.removeEventListener("mouseup",eM),document.body.style.userSelect=""),()=>{window.removeEventListener("mousemove",eY),window.removeEventListener("mouseup",eM),document.body.style.userSelect=""}),[Z,eY,eM]),(0,r.jsx)(r.Fragment,{children:e_?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white border-b py-4 px-6 z-50 shadow-sm",children:(0,r.jsx)("div",{className:"container mx-auto",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"ASB Generator v2"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(y,{children:[(0,r.jsx)(j,{asChild:!0,children:(0,r.jsxs)(h,{variant:"outline",children:[(0,r.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Import JSON"]})}),(0,r.jsxs)(C,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsx)(k,{children:(0,r.jsx)(E,{children:"Import Localized Content"})}),(0,r.jsx)("div",{className:"space-y-4 py-4",children:(0,r.jsx)("div",{className:"space-y-4 py-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{children:"Импорт из файла"}),(0,r.jsx)(u,{type:"file",accept:".json",onChange:eS,className:"mt-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{children:"Или вставьте JSON текст"}),(0,r.jsx)(x,{value:d,onChange:e=>m(e.target.value),placeholder:"Вставьте JSON здесь...",className:"mt-2 min-h-[200px]"}),(0,r.jsx)(h,{onClick:()=>{try{let e=JSON.parse(d);if(!e.global||!e.banners)throw Error("Неверный формат JSON: отсутствуют разделы global или banners");let t={};Object.entries(e.global).forEach(e=>{let[o,r]=e;t[o]||(t[o]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),t[o]={...t[o],title:r.title||"",description:r.description||"",promotionalText:r.promotionalText||"",whatsNew:r.whatsNew||"",keywords:r.keywords||""}}),Object.entries(e.banners).forEach(e=>{let[o,r]=e;t[o]||(t[o]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""}),Object.entries(r).forEach(e=>{let[r,n]=e;t[o]["".concat(r,"_title")]=n.title||"",t[o]["".concat(r,"_description")]=n.description||""})}),s(t),m(""),alert("JSON успешно импортирован!")}catch(e){console.error("Ошибка при импорте JSON:",e),alert("Ошибка при импорте JSON. Проверьте формат текста.")}},className:"mt-2",disabled:!d,children:"Импортировать из текста"})]})]})})})]})]}),(0,r.jsxs)(h,{variant:"outline",onClick:()=>{let e={global:{},banners:{}};es.forEach(t=>{let{code:o}=t;e.global[o]||(e.global[o]={title:"ru"===o&&ex(o,"title")||"",description:"ru"===o&&ex(o,"description")||"",promotionalText:"ru"===o&&ex(o,"promotionalText")||"",whatsNew:"ru"===o&&ex(o,"whatsNew")||"",keywords:"ru"===o&&ex(o,"keywords")||""}),e.banners[o]||(e.banners[o]={}),en.forEach(t=>{let r="preview_".concat(t.id);e.banners[o][r]={title:"ru"===o&&ep(o,t.id,"title")||"",description:"ru"===o&&ep(o,t.id,"description")||""}})});let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download="localized_content.json",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(o)},0)},children:[(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4"}),"Export JSON"]}),(0,r.jsx)(el,{languages:es,activeLanguage:e,onChange:e=>{if(t(e),!l[e]){let t={...l};t[e]={title:"",description:"",promotionalText:"",whatsNew:"",keywords:""},s(t)}}}),(0,r.jsxs)(y,{children:[(0,r.jsx)(j,{asChild:!0,children:(0,r.jsx)(h,{variant:"default",disabled:i,children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Exporting ",Math.round(f),"%"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Export All Images"]})})}),(0,r.jsxs)(C,{className:"sm:max-w-md",children:[(0,r.jsxs)(k,{children:[(0,r.jsx)(E,{children:"Экспорт изображений"}),(0,r.jsx)(z,{children:"Выберите локали для экспорта изображений"})]}),(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,r.jsx)(h,{variant:"outline",size:"sm",onClick:()=>eE(!0),children:"Выбрать все"}),(0,r.jsx)(h,{variant:"outline",size:"sm",onClick:()=>eE(!1),children:"Отменить все"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:es.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"lang-".concat(e.code),checked:eC[e.code],onChange:()=>eD(e.code),className:"rounded border-gray-300"}),(0,r.jsxs)("label",{htmlFor:"lang-".concat(e.code),className:"text-sm font-medium",children:[e.name," (",e.code,")"]})]},e.code))})]}),(0,r.jsx)(D,{children:(0,r.jsx)(h,{onClick:ez,disabled:i||Object.values(eC).every(e=>!e),children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Экспорт ",Math.round(f),"%"]}):"Экспортировать"})})]})]})]})]})})}),(0,r.jsx)("div",{className:"flex-grow container mx-auto px-4 py-6 mt-[116px]",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-6",children:[(0,r.jsx)("div",{children:(0,r.jsx)(Y,{className:"overflow-hidden",children:(0,r.jsx)(M,{className:"p-0",children:(0,r.jsx)("div",{className:"bg-gray-100 p-6 flex flex-col min-h-[800px]",onClick:e=>{e.target===e.currentTarget&&Q("banner")},children:(0,r.jsxs)("div",{ref:V,className:"flex overflow-x-auto pb-4 pt-2 px-2 -mx-2 mb-4 snap-x",style:{scrollbarWidth:"thin"},children:[en.map((e,t)=>eA(e,t)),(0,r.jsx)("div",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-primary hover:bg-gray-50",style:{width:"320px",height:"690px",flexShrink:0,margin:"0 8px"},onClick:()=>{let e=en.length>0?Math.max(...en.map(e=>e.id))+1:1,t=["#FFD700","#F5F5DC","#FF6347","#FFDAB9","#87CEEB","#98FB98","#DDA0DD","#F0E68C"],o=t[Math.floor(Math.random()*t.length)];ea([...en,{id:e,name:"Preview ".concat(e),backgroundColor:o,devicePosition:"center",deviceScale:100,verticalOffset:{combined:0,title:0,description:0,device:0},horizontalOffset:{combined:0,title:0,description:0},screenshot:{file:null,borderColor:"#000000",borderWidth:8,borderRadius:30}}]),setTimeout(()=>{V.current&&(V.current.scrollLeft=V.current.scrollWidth)},100)},children:(0,r.jsx)(P.A,{className:"h-12 w-12 text-gray-400"})})]})})})})}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"fixed top-0 right-0 h-screen w-[320px] z-40",style:{paddingTop:"65px"},children:(0,r.jsx)(Y,{className:"h-full rounded-none border-l border-t-0 border-r-0 border-b-0",children:(0,r.jsx)(M,{className:"p-6 h-full overflow-y-auto",children:(()=>{var t,o,n,a,l,s,i,c,d,h,m,f;let p=en[v]||{};switch(K){case"none":case"banner":return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-base font-medium font-mono",children:"Banner Settings"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{className:"text-xs font-mono",children:"Background Color"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(ed,{color:p.backgroundColor||"#007AFF",onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],backgroundColor:e},ea(t))}})})]}),(0,r.jsx)(X,{className:"my-4"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"text-xs font-medium text-gray-500 font-mono",children:"Localized App Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{className:"text-xs font-mono",children:"Promotional Text"}),(0,r.jsx)(x,{value:ex(e,"promotionalText")||"",onChange:t=>{eh(e,"promotionalText",t.target.value)},className:"mt-1",rows:4,placeholder:"Promotional text in ".concat(e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{className:"text-xs font-mono",children:"Description"}),(0,r.jsx)(x,{value:ex(e,"description")||"",onChange:t=>{eh(e,"description",t.target.value)},className:"mt-1",rows:4,placeholder:"Description in ".concat(e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{className:"text-xs font-mono",children:"What's New in This Version"}),(0,r.jsx)(x,{value:ex(e,"whatsNew")||"",onChange:t=>{eh(e,"whatsNew",t.target.value)},className:"mt-1",rows:4,placeholder:"What's new in ".concat(e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{className:"text-xs font-mono",children:"Keywords"}),(0,r.jsx)(u,{value:ex(e,"keywords")||"",onChange:t=>{eh(e,"keywords",t.target.value)},className:"mt-1",placeholder:"Keywords in ".concat(e)})]})]})]})});case"title":case"description":let b="title"===K;return(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h3",{className:"text-base font-semibold font-mono",children:b?"Заголовок":"Описание"}),(0,r.jsx)(g,{className:"text-xs text-gray-500 font-mono",children:b?"Текст заголовка":"Текст описания"}),(0,r.jsx)(x,{value:ep(e,p.id,b?"title":"description")||"",onChange:t=>{eP(e,p.id,b?"title":"description",t.target.value)},className:"mt-1",placeholder:b?"Введите заголовок...":"Введите описание..."})]}),(0,r.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:b?"Вертикальное смещение заголовка":"Вертикальное смещение описания"})}),(0,r.jsx)(eg,{value:(null===(t=p.verticalOffset)||void 0===t?void 0:t[b?"title":"description"])||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],verticalOffset:{...t[v].verticalOffset,[b?"title":"description"]:e}},ea(t))},min:-300,max:300,unit:"px"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:b?"Горизонтальное смещение заголовка":"Горизонтальное смещение описания"})}),(0,r.jsx)(eg,{value:(null===(o=p.horizontalOffset)||void 0===o?void 0:o[b?"title":"description"])||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],horizontalOffset:{...t[v].horizontalOffset,[b?"title":"description"]:e}},ea(t))},min:-300,max:300,unit:"px"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:b?"Поворот заголовка":"Поворот описания"})}),(0,r.jsx)(eg,{value:(null===(n=p.rotation)||void 0===n?void 0:n[b?"title":"description"])||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],rotation:{...t[v].rotation,[b?"title":"description"]:e}},ea(t))},min:-180,max:180,unit:"\xb0"})]})]})]})});case"text-block":return(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-base font-semibold font-mono",children:"Блок текста"}),(0,r.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:"Вертикальное смещение блока"})}),(0,r.jsx)(eg,{value:(null===(a=p.verticalOffset)||void 0===a?void 0:a.combined)||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],verticalOffset:{...t[v].verticalOffset,combined:e}},ea(t))},min:-300,max:300,unit:"px"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:"Горизонтальное смещение блока"})}),(0,r.jsx)(eg,{value:(null===(l=p.horizontalOffset)||void 0===l?void 0:l.combined)||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],horizontalOffset:{...t[v].horizontalOffset,combined:e}},ea(t))},min:-300,max:300,unit:"px"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"font-mono",children:"Поворот блока"})}),(0,r.jsx)(eg,{value:(null===(s=p.rotation)||void 0===s?void 0:s.textBlock)||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],rotation:{...t[v].rotation,textBlock:e}},ea(t))},min:-180,max:180,unit:"\xb0"})]})]})]})});case"device":return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-base font-medium font-mono",children:"Device Settings"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{className:"text-xs font-mono",children:"Position"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-0.5 mt-1",children:ec.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{let t=[...en];t[v]&&(t[v]={...t[v],devicePosition:e.value},ea(t))},className:"p-0.5 rounded-md border ".concat(p.devicePosition===e.value?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"),title:e.label,children:{"top-left":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"4",y:"4",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"14",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"top-center":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"9",y:"4",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"14",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"top-right":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"14",y:"4",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"14",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"center-left":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"4",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"14",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),center:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"4",y:"2",width:"16",height:"4",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"9",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"18",width:"16",height:"4",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]}),"center-right":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"14",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"9",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"bottom-left":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"4",y:"14",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"4",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"bottom-center":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"9",y:"14",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"4",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]}),"bottom-right":(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-3 w-3 mx-auto",children:[(0,r.jsx)("rect",{x:"14",y:"14",width:"6",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("rect",{x:"4",y:"4",width:"16",height:"6",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeDasharray:"2 2"})]})}[e.value]||(0,r.jsx)(F.A,{className:"h-4 w-4 mx-auto"})},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:"Device Scale"})}),(0,r.jsx)(eg,{value:p.deviceScale||100,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],deviceScale:e},ea(t))},min:50,max:150,unit:"%"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:"Vertical Position"})}),(0,r.jsx)(eg,{value:(null===(c=en[v])||void 0===c?void 0:null===(i=c.verticalOffset)||void 0===i?void 0:i.device)||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],verticalOffset:{...t[v].verticalOffset,device:e}},ea(t))},min:-300,max:300,unit:"px"})]}),(0,r.jsx)(X,{}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-base font-medium font-mono",children:"Border Settings"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{className:"text-xs font-mono",children:"Border Color"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(ed,{color:(null===(d=p.screenshot)||void 0===d?void 0:d.borderColor)||"#000000",onChange:e=>ey("borderColor",e)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:"Border Width"})}),(0,r.jsx)(eg,{value:(null===(h=p.screenshot)||void 0===h?void 0:h.borderWidth)||8,onChange:e=>ey("borderWidth",e),min:0,max:20,unit:"px"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:"Border Radius"})}),(0,r.jsx)(eg,{value:(null===(m=p.screenshot)||void 0===m?void 0:m.borderRadius)||30,onChange:e=>ey("borderRadius",e),min:0,max:60,unit:"px"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)(g,{className:"text-xs font-mono",children:"Rotation"})}),(0,r.jsx)(eg,{value:(null===(f=p.rotation)||void 0===f?void 0:f.device)||0,onChange:e=>{let t=[...en];t[v]&&(t[v]={...t[v],rotation:{...t[v].rotation,device:e}},ea(t))},min:-360,max:360,unit:"\xb0"})]})]})});default:return null}})()})})})})]})})]}):null})}}},e=>{var t=t=>e(e.s=t);e.O(0,[316,173,441,517,358],()=>t(3717)),_N_E=e.O()}]);